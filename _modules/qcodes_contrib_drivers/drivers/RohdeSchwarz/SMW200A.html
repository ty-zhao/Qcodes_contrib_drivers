<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A &mdash; qcodes_contrib_drivers 0.14.0.dev508+main.g5677223 documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../_static/documentation_options.js?v=f47d49fe"></script>
        <script src="../../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            qcodes_contrib_drivers
          </a>
              <div class="version">
                0.14.0.dev508+main.g5677223
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../examples/index.html">Examples of how to use drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.html">qcodes_contrib_drivers.drivers package</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">qcodes_contrib_drivers</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;QCoDeS-Driver for Rohde&amp;Schwarz Vector Signal Generator RS_SMW200A.</span>

<span class="sd">This driver can be used with a simulation class (SMW200Asim.py) to generate</span>
<span class="sd">reasonable answers to all requests. The only thing is to change two times</span>
<span class="sd">the comments as shown below (real mode/simulation mode).</span>

<span class="sd">Note:</span>
<span class="sd">    To use RohdeSchwarz_SMW200A with a dummy/simulator, replace its base class `VisaInstrument` with</span>
<span class="sd">    `MockVisa` from file SMW200Asim.py.</span>

<span class="sd">Authors:</span>
<span class="sd">    Michael Wagener, ZEA-2, m.wagener@fz-juelich.de</span>
<span class="sd">    Sarah Fleitmann, ZEA-2, s.fleitmann@fz-juelich.de</span>
<span class="sd">    Lukas Lankes, ZEA-2, l.lankes@fz-juelich.de</span>
<span class="sd">&quot;&quot;&quot;</span>


<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Union</span>

<span class="kn">from</span> <span class="nn">qcodes</span> <span class="kn">import</span> <span class="n">VisaInstrument</span>
<span class="kn">from</span> <span class="nn">qcodes.instrument.channel</span> <span class="kn">import</span> <span class="n">InstrumentChannel</span><span class="p">,</span> <span class="n">ChannelList</span>
<span class="kn">from</span> <span class="nn">qcodes</span> <span class="kn">import</span> <span class="n">validators</span> <span class="k">as</span> <span class="n">vals</span>

<span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="n">_MODULATION_SIGNAL_DOC_POOL</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;INT&quot;</span><span class="p">:</span> <span class="s2">&quot;internally generated LF signal = &#39;LF1&#39;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;EXT&quot;</span><span class="p">:</span> <span class="s2">&quot;externally supplied LF signal  = &#39;EXT1&#39;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;LF1&quot;</span><span class="p">:</span> <span class="s2">&quot;first internally generated signal&quot;</span><span class="p">,</span>
    <span class="s2">&quot;LF2&quot;</span><span class="p">:</span> <span class="s2">&quot;second internally gererated signal&quot;</span><span class="p">,</span>
    <span class="s2">&quot;NOIS&quot;</span><span class="p">:</span> <span class="s2">&quot;internally generated noise signal&quot;</span><span class="p">,</span>
    <span class="s2">&quot;EXT1&quot;</span><span class="p">:</span> <span class="s2">&quot;first externally supplied signal&quot;</span><span class="p">,</span>
    <span class="s2">&quot;EXT2&quot;</span><span class="p">:</span> <span class="s2">&quot;second externally supplied signal&quot;</span><span class="p">,</span>
    <span class="s2">&quot;INTB&quot;</span><span class="p">:</span> <span class="s2">&quot;internal baseband signal&quot;</span>
<span class="p">}</span>


<div class="viewcode-block" id="IQChannel">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.IQChannel">[docs]</a>
<span class="k">class</span> <span class="nc">IQChannel</span><span class="p">(</span><span class="n">InstrumentChannel</span><span class="p">):</span>

<div class="viewcode-block" id="IQChannel.__init__">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.IQChannel.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="s1">&#39;RohdeSchwarz_SMW200A&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">hwchan</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The I/Q channels are the analog output channels of the device.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            parent: the parent instrument of this channel</span>
<span class="sd">            name:   the internal QCoDeS name of this channel</span>
<span class="sd">            hwchan: the internal number of the hardware channel used in the communication</span>

<span class="sd">        Attributes:</span>
<span class="sd">            state: Actives/deactives the I/Q output. Values are &#39;ON&#39; and &#39;OFF&#39;.</span>
<span class="sd">            type: Sets the type of the analog signal. Values are &#39;SING&#39; (single) and &#39;DIFF&#39;</span>
<span class="sd">                (differential, only available with option SMW-K16)</span>
<span class="sd">            mode: Determines the mode for setting the output parameters. Values are</span>
<span class="sd">                &#39;FIX&#39;: Locks the I/Q output settings</span>
<span class="sd">                &#39;VAR&#39;: Unlocks the settings (only available with option SMW-K16)</span>
<span class="sd">            level: Sets the off-load voltage Vp of the analog I/Q signal output.</span>
<span class="sd">                Values are in range 0.04V to 4V for option SMW-B10 and in range 0.04V</span>
<span class="sd">                to 2V for option SMW-B9. The value range is adjusted so that the maximum</span>
<span class="sd">                overall output voltage does not exceed 4V. Only settable when mode has</span>
<span class="sd">                the value &#39;VAR&#39;.</span>
<span class="sd">            coupling: Couples the bias setting of the I and Q signal components.</span>
<span class="sd">                Values are &#39;ON and &#39;OFF&#39;.</span>
<span class="sd">            i_bias: Specifies the amplifier bias of the I component. The value range</span>
<span class="sd">                is adjusted so that the maximum overall output voltage does not</span>
<span class="sd">                exceed 4V. Is only settable, if the mode parameter has the value &#39;VAR&#39;.</span>
<span class="sd">            q_bias: Specifies the amplifier bias of the Q component. The value range</span>
<span class="sd">                is adjusted so that the maximum overall output voltage does not</span>
<span class="sd">                exceed 4V. Is only settable, if the mode parameter has the value &#39;VAR&#39;.</span>
<span class="sd">            i_offset: Sets an offset between the inverting and non-inverting input</span>
<span class="sd">                of the differential analog I/Q output signal for the I component.</span>
<span class="sd">                The value range is adjusted so that the maximum overall output voltage</span>
<span class="sd">                does not exceed 4V. Is only settable, if parameter mode has the value &#39;VAR&#39;.</span>
<span class="sd">            q_offset: Sets an offset between the inverting and non-inverting input</span>
<span class="sd">                of the differential analog I/Q output signal for the Q component.</span>
<span class="sd">                The value range is adjusted so that the maximum overall output voltage</span>
<span class="sd">                does not exceed 4V. Is only settable, if parameter mode has the value &#39;VAR&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span> <span class="o">=</span> <span class="n">hwchan</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;State&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:OUTP:ANAL:STAT </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:OUTP:ANAL:STAT?&#39;</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ON&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;ON&#39;</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Actives/deactives the I/Q output. Values are &#39;ON&#39; and &#39;OFF&#39;.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;SMW-K16&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
            <span class="n">type_validator</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;SING&#39;</span><span class="p">,</span> <span class="s1">&#39;DIFF&#39;</span><span class="p">)</span>
            <span class="n">mode_validator</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;FIX&#39;</span><span class="p">,</span> <span class="s1">&#39;VAR&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">type_validator</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;SING&#39;</span><span class="p">)</span>
            <span class="n">mode_validator</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;FIX&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Type&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:OUTP:ANAL:TYPE </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:OUTP:ANAL:TYPE?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">type_validator</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Sets the type of the analog signal. Values are&quot;</span>
                                     <span class="s2">&quot; &#39;SING&#39; (single) and &#39;DIFF&#39; (differential, only&quot;</span>
                                     <span class="s2">&quot; available with option SMW-K16)&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Mode&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:OUTP:ANAL:MODE </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:OUTP:ANAL:MODE?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">mode_validator</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                           Determines the mode for setting the output parameters. Values are:</span>
<span class="s2">                               &#39;FIX&#39;: Locks the I/Q output settings</span>
<span class="s2">                               &#39;VAR&#39;: Unlocks the settings (only available with option SMW-K16)</span>
<span class="s2">                           &quot;&quot;&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;SMW-B10&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
            <span class="n">level_validator</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mf">0.04</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1">#option SMW-B9</span>
            <span class="n">level_validator</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mf">0.04</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

        <span class="n">level_set_cmd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;VAR&#39;</span><span class="p">:</span>
            <span class="n">level_set_cmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:OUTP:LEV </span><span class="si">{}</span><span class="s1">&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;level&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Level&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="n">level_set_cmd</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:OUTP:LEV?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">level_validator</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;V&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Sets the off-load voltage Vp of the analog I/Q signal&quot;</span>
                                     <span class="s2">&quot; output. Values are in range 0.04V to 4V for option&quot;</span>
                                     <span class="s2">&quot; SMW-B10 and in range 0.04V to 2V for option SMW-B9.&quot;</span>
                                     <span class="s2">&quot; The value range is adjusted so that the maximum&quot;</span>
                                     <span class="s2">&quot; overall output voltage does not exceed 4V. Only&quot;</span>
                                     <span class="s2">&quot; settable when mode has the value &#39;VAR&#39;.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;coupling&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Coupling&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:OUTP:ANAL:BIAS:COUP:STAT </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:OUTP:ANAL:BIAS:COUP:STAT?&#39;</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ON&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;ON&#39;</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Couples the bias setting of the I and Q signal&quot;</span>
                                     <span class="s2">&quot; components. Values are &#39;ON and &#39;OFF&#39;.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;SMW-B10&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
            <span class="n">lower</span> <span class="o">=</span> <span class="o">-</span><span class="mi">4</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">level</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">i_offset</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span>
            <span class="n">upper</span> <span class="o">=</span> <span class="mi">4</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">level</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">i_offset</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span>
            <span class="n">bias_validator</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1">#option SMW-B9</span>
            <span class="n">bias_validator</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">)</span>

        <span class="n">i_bias_set_cmd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;VAR&#39;</span><span class="p">:</span>
            <span class="n">i_bias_set_cmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;IQ:OUTP:ANAL:BIAS:I </span><span class="si">{}</span><span class="s1">&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;i_bias&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;I bias&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="n">i_bias_set_cmd</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:OUTP:ANAL:BIAS:I?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">bias_validator</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;V&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Specifies the amplifier bias of the I component.&quot;</span>
                                     <span class="s2">&quot; The value range is adjusted so that the maximum&quot;</span>
                                     <span class="s2">&quot; overall output voltage does not exceed 4V. Is only&quot;</span>
                                     <span class="s2">&quot; settable, if the mode parameter has the value &#39;VAR&#39;.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;SMW-B10&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
            <span class="n">lower</span> <span class="o">=</span> <span class="o">-</span><span class="mi">4</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">level</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">q_offset</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span>
            <span class="n">upper</span> <span class="o">=</span> <span class="mi">4</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">level</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">q_offset</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span>
            <span class="n">bias_validator</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1">#option SMW-B9</span>
            <span class="n">bias_validator</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">)</span>

        <span class="n">q_bias_set_cmd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;VAR&#39;</span><span class="p">:</span>
            <span class="n">q_bias_set_cmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:OUTP:ANAL:BIAS:Q </span><span class="si">{}</span><span class="s1">&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;q_bias&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Q bias&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="n">q_bias_set_cmd</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:OUTP:ANAL:BIAS:Q?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">bias_validator</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;V&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Specifies the amplifier bias of the Q component.&quot;</span>
                                     <span class="s2">&quot; The value range is adjusted so that the maximum&quot;</span>
                                     <span class="s2">&quot; overall output voltage does not exceed 4V. Is only&quot;</span>
                                     <span class="s2">&quot; settable, if the mode parameter has the value &#39;VAR&#39;.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;SMW-B10&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
            <span class="n">lower</span> <span class="o">=</span> <span class="o">-</span><span class="mi">4</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">level</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">i_bias</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span>
            <span class="n">upper</span> <span class="o">=</span> <span class="mi">4</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">level</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">i_bias</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span>
            <span class="n">offset_validator</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1">#option SMW-B9</span>
            <span class="n">lower</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">level</span><span class="p">()</span>
            <span class="n">upper</span> <span class="o">=</span> <span class="mi">2</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">level</span><span class="p">()</span>
            <span class="n">offset_validator</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">)</span>

        <span class="n">i_offset_set_cmd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;VAR&#39;</span><span class="p">:</span>
            <span class="n">i_offset_set_cmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:OUTP:ANAL:OFFS:I </span><span class="si">{}</span><span class="s1">&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;i_offset&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;I offset&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="n">i_offset_set_cmd</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:OUTP:ANAL:OFFS:I?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">offset_validator</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;V&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Sets an offset between the inverting and non-inverting&quot;</span>
                                     <span class="s2">&quot; input of the differential analog I/Q output signal&quot;</span>
                                     <span class="s2">&quot; for the I component.&quot;</span>
                                     <span class="s2">&quot; The value range is adjusted so that the maximum&quot;</span>
                                     <span class="s2">&quot; overall output voltage does not exceed 4V. Is only&quot;</span>
                                     <span class="s2">&quot; settable, if the mode parameter has the value &#39;VAR&#39;.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;SMW-B10&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
            <span class="n">lower</span> <span class="o">=</span> <span class="o">-</span><span class="mi">4</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">level</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">q_bias</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span>
            <span class="n">upper</span> <span class="o">=</span> <span class="mi">4</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">level</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">q_bias</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span>
            <span class="n">offset_validator</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1">#option SMW-B9</span>
            <span class="n">lower</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">level</span><span class="p">()</span>
            <span class="n">upper</span> <span class="o">=</span> <span class="mi">2</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">level</span><span class="p">()</span>
            <span class="n">offset_validator</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">)</span>

        <span class="n">q_offset_set_cmd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;VAR&#39;</span><span class="p">:</span>
            <span class="n">q_offset_set_cmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:OUTP:ANAL:OFFS:Q </span><span class="si">{}</span><span class="s1">&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;q_offset&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Q offset&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="n">q_offset_set_cmd</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:OUTP:ANAL:OFFS:Q?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">offset_validator</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;V&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Sets an offset between the inverting and non-inverting&quot;</span>
                                     <span class="s2">&quot; input of the differential analog I/Q output signal&quot;</span>
                                     <span class="s2">&quot; for the Q component.&quot;</span>
                                     <span class="s2">&quot; The value range is adjusted so that the maximum&quot;</span>
                                     <span class="s2">&quot; overall output voltage does not exceed 4V. Is only&quot;</span>
                                     <span class="s2">&quot; settable, if the mode parameter has the value &#39;VAR&#39;.&quot;</span><span class="p">)</span></div>
</div>

        <span class="c1"># TODO: setter methods for the last 4 parameters, they have dynamic validators</span>



<div class="viewcode-block" id="IQModulation">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.IQModulation">[docs]</a>
<span class="k">class</span> <span class="nc">IQModulation</span><span class="p">(</span><span class="n">InstrumentChannel</span><span class="p">):</span>

<div class="viewcode-block" id="IQModulation.__init__">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.IQModulation.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="s1">&#39;RohdeSchwarz_SMW200A&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">hwchan</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Combines all the parameters concerning the IQ modulation.</span>

<span class="sd">        Args:</span>
<span class="sd">            parent: the parent instrument of this channel</span>
<span class="sd">            name  : the internal QCoDeS name of this channel</span>
<span class="sd">            hwchan: the internal number of the hardware channel used in the communication</span>

<span class="sd">        Attributes:</span>
<span class="sd">            state: Activates/deactivates the I/Q modulation. Values are &#39;ON&#39;, and &#39;OFF&#39;.</span>
<span class="sd">            source: Selects/reads the input signal source for the I/Q modulator.</span>
<span class="sd">                &#39;BAS&#39;: internal baseband signal</span>
<span class="sd">                &#39;ANAL&#39;: external analog signal</span>
<span class="sd">                &#39;DIFF&#39;: differential analog signal (only with option SMW-K739)</span>
<span class="sd">            gain: Optimizes the modulation of the I/Q modulator for a subset of</span>
<span class="sd">                measurement requirements.</span>
<span class="sd">                &#39;DB0&#39;: Activates the gain of  0 dB</span>
<span class="sd">                &#39;DB2&#39;: Activates the gain of +2 dB</span>
<span class="sd">                &#39;DB3&#39;: same as &#39;DB2&#39;, for backward compatibility</span>
<span class="sd">                &#39;DB4&#39;: Activates the gain of +4 dB</span>
<span class="sd">                &#39;DB6&#39;: Activates the gain of +6 dB</span>
<span class="sd">                &#39;DB8&#39;: Activates the gain of +8 dB</span>
<span class="sd">                &#39;DBM2&#39;: Activates the gain of -2 dB</span>
<span class="sd">                &#39;DBM3&#39;: same as &#39;DBM2&#39;, for backward compatibility</span>
<span class="sd">                &#39;DBM4&#39;: Activates the gain of -4 dB</span>
<span class="sd">                &#39;AUTO&#39;: The gain value is retrieved form the connected R&amp;S SZU. The I/Q modulator</span>
<span class="sd">                is configured automatically.</span>
<span class="sd">            swap: Activates/Deactives the swapping of the I and Q channel. Values are &#39;ON&#39; / &#39;OFF&#39;.</span>
<span class="sd">            crest_factor: If source set to &#39;ANAL&#39; (Analog Wideband I/Q Input), sets the crest factor</span>
<span class="sd">                of the externally supplied analog signal. The crest factor gives the difference in</span>
<span class="sd">                level between the peak envelope power (PEP) and the average power value (RMS) in dB.</span>
<span class="sd">                The R&amp;S SMW uses this value for the calculation of the RF output power. The allowed</span>
<span class="sd">                range is from 0 dB to 35 dB.</span>
<span class="sd">            wideband: Activates/deactivates optimization for wideband modulation signals</span>
<span class="sd">                (higher I/Q modulation bandwidth). Values are &#39;ON&#39; and &#39;OFF&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span> <span class="o">=</span> <span class="n">hwchan</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;SMW-K739&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
            <span class="n">source_validator</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;BAS&#39;</span><span class="p">,</span> <span class="s1">&#39;ANAL&#39;</span><span class="p">,</span> <span class="s1">&#39;DIFF&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">source_validator</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;BAS&#39;</span><span class="p">,</span> <span class="s1">&#39;ANAL&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;source&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Source&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:SOUR </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:SOUR?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">source_validator</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                           Selects/reads the input signal source for the I/Q modulator.</span>
<span class="s2">                           Values are:</span>
<span class="s2">                               &#39;BAS&#39;: internal baseband signal</span>
<span class="s2">                               &#39;ANAL&#39;: external analog signal</span>
<span class="s2">                               &#39;DIFF&#39;: differential analog signal (only with option SMW-K739)</span>
<span class="s2">                           &quot;&quot;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;State&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:STAT </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:STAT?&#39;</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ON&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;ON&#39;</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Activates/deactivates the I/Q modulation. Values&quot;</span>
                                     <span class="s2">&quot; are &#39;ON&#39;, and &#39;OFF&#39;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;gain&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Gain&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:GAIN </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:GAIN?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;DBM4&#39;</span><span class="p">,</span> <span class="s1">&#39;DBM2&#39;</span><span class="p">,</span> <span class="s1">&#39;DB0&#39;</span><span class="p">,</span> <span class="s1">&#39;DB2&#39;</span><span class="p">,</span> <span class="s1">&#39;DB4&#39;</span><span class="p">,</span> \
                                          <span class="s1">&#39;DB8&#39;</span><span class="p">,</span> <span class="s1">&#39;DB6&#39;</span><span class="p">,</span> <span class="s1">&#39;DBM3&#39;</span><span class="p">,</span> <span class="s1">&#39;DB3&#39;</span><span class="p">,</span> <span class="s1">&#39;AUTO&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                           Optimizes the modulation of the I/Q modulator for a subset</span>
<span class="s2">                           of measurement requirements. Possible values are:</span>
<span class="s2">                               &#39;DB0&#39;=0dB, &#39;DB2&#39;=+2dB, &#39;DB4&#39;=+4dB, &#39;DB6&#39;=+6dB, &#39;DB8&#39;=+8dB</span>
<span class="s2">                               &#39;DBM2&#39;=-2dB, &#39;DBM4&#39;=-4dB</span>
<span class="s2">                               &#39;DB3&#39; and &#39;DBM3&#39; provided for backward compatibility (+/-2dB)</span>
<span class="s2">                               &#39;AUTO&#39;: The gain value is retrieved form the connected R&amp;S SZU.</span>
<span class="s2">                               The I/Q modulator is configured automatically.</span>
<span class="s2">                           &quot;&quot;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;crest_factor&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Crest factor&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:CRES </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:CRES?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">35</span><span class="p">),</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;dB&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;If source set to `ANAL&#39; (Analog Wideband I/Q Input),&quot;</span>
                                     <span class="s2">&quot; sets the crest factor of the externally supplied&quot;</span>
                                     <span class="s2">&quot; analog signal. The crest factor gives the difference&quot;</span>
                                     <span class="s2">&quot; in level between the peak envelope power (PEP) and&quot;</span>
                                     <span class="s2">&quot; the average power value (RMS) in dB. The R&amp;S SMW uses&quot;</span>
                                     <span class="s2">&quot; this value for the calculation of the RF output power.&quot;</span>
                                     <span class="s2">&quot; The allowed range is from 0 dB to 35 dB.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;swap&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Swap&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:SWAP:STAT </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:SWAP:STAT?&#39;</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ON&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;ON&#39;</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Activates/Deactives the swapping of the I&quot;</span>
                                     <span class="s2">&quot; and Q channel. Values are &#39;ON&#39; and &#39;OFF&#39;.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;wideband&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Wideband&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:WBST </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span><span class="o">+</span><span class="s1">&#39;IQ:WBST?&#39;</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ON&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;ON&#39;</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Activates/deactivates optimization for wideband&quot;</span>
                                     <span class="s2">&quot; modulation signals (higher I/Q modulation&quot;</span>
                                     <span class="s2">&quot; bandwidth). Values are &#39;ON&#39; and &#39;OFF&#39;.&quot;</span><span class="p">)</span></div>
</div>




<div class="viewcode-block" id="FrequencyModulation">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.FrequencyModulation">[docs]</a>
<span class="k">class</span> <span class="nc">FrequencyModulation</span><span class="p">(</span><span class="n">InstrumentChannel</span><span class="p">):</span>

<div class="viewcode-block" id="FrequencyModulation.__init__">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.FrequencyModulation.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="s1">&#39;RohdeSchwarz_SMW200A&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">hwchan</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">chnum</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Combines all the parameters concerning the frequency modulation.</span>

<span class="sd">        Args:</span>
<span class="sd">            parent: the parent instrument of this channel</span>
<span class="sd">            name  : the internal QCoDeS name of this channel</span>
<span class="sd">            hwchan: the internal number of the hardware channel used in the communication</span>
<span class="sd">            chnum : the internal number of the channel used for the communication</span>
<span class="sd">    </span>
<span class="sd">        Attributes:</span>
<span class="sd">            state: actives/deactivates the frequency modulation. Values are &#39;ON&#39; and &#39;OFF&#39;.</span>
<span class="sd">            deviation: Sets the modulation deviation of the frequency modulation in Hz.</span>
<span class="sd">            source: Selects the modulation source. Values are:</span>
<span class="sd">                &#39;INT&#39;: internally generated LF signal = &#39;LF1&#39; (channel 2 only with option SMW-K24)</span>
<span class="sd">                &#39;EXT&#39;: externally supplied LF signal  = &#39;EXT1&#39; (channel 2 only with option SMW-K24)</span>
<span class="sd">                &#39;LF1&#39;: first internally generated signal</span>
<span class="sd">                &#39;LF2&#39;: second internally gererated signal (only available with option SMW-K24)</span>
<span class="sd">                &#39;NOIS&#39;: internally generated noise signal (only available with option SMW-K24)</span>
<span class="sd">                &#39;EXT1&#39;: first externally supplied signal</span>
<span class="sd">                &#39;EXT2&#39;: second externally supplied signal</span>
<span class="sd">                &#39;INTB&#39;: internal baseband signal (only available with option SMW-B9)</span>
<span class="sd">            coupling_mode: Selects the coupling mode. The coupling mode parameter also</span>
<span class="sd">                determines the mode for fixing the total deviation. Values are:</span>
<span class="sd">                &#39;UNC&#39;: Does not couple the LF signals. The deviation values of both paths are</span>
<span class="sd">                independent.</span>
<span class="sd">                &#39;TOT&#39;: Couples the deviation of both paths.</span>
<span class="sd">                &#39;RAT&#39;: Couples the deviation ratio of both paths</span>
<span class="sd">            total_deviation: Sets the total deviation of the LF signal when using combined</span>
<span class="sd">                signal sources in frequency modulation.</span>
<span class="sd">            deviation_ratio: Sets the deviation ratio (path2 to path1) in percent.</span>
<span class="sd">            mode: Selects the mode for the frequency modulation. Values are:</span>
<span class="sd">                &#39;NOR&#39;: normal mode</span>
<span class="sd">                &#39;LNO&#39;: low noise mode</span>
<span class="sd">            sensitivity: (ReadOnly) Queries the sensitivity of the externally supplied signal for</span>
<span class="sd">                frequency modulation. The sensitivity depends on the set modulation deviation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span> <span class="o">=</span> <span class="n">hwchan</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">chnum</span> <span class="o">=</span> <span class="n">chnum</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;State&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:FM</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;STAT </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:FM</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:STAT?&#39;</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ON&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;ON&#39;</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;actives/deactivates the frequency modulation.&quot;</span>
                                     <span class="s2">&quot; Values are &#39;ON&#39; and &#39;OFF&#39;.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;deviation&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Deviation&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:FM</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;DEV </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:FM</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:DEV?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.6e8</span><span class="p">),</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;Hz&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Sets the modulation deviation of the frequency&quot;</span>
                                     <span class="s2">&quot; modulation in Hz.&quot;</span><span class="p">)</span>

        <span class="c1"># Select the set of available values from the installed options</span>
        <span class="k">if</span> <span class="s1">&#39;SMW-B9&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span> <span class="ow">and</span> <span class="ow">not</span> <span class="s1">&#39;SMW-K24&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
            <span class="n">sv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;INT&#39;</span><span class="p">,</span> <span class="s1">&#39;LF1&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT1&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT2&#39;</span><span class="p">,</span> <span class="s1">&#39;INTB&#39;</span><span class="p">]</span> \
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chnum</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="p">[</span><span class="s1">&#39;LF1&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT1&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT2&#39;</span><span class="p">,</span> <span class="s1">&#39;INTB&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="s1">&#39;SMW-B9&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span> <span class="ow">and</span> <span class="s1">&#39;SMW-K24&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
            <span class="n">sv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;INT&#39;</span><span class="p">,</span> <span class="s1">&#39;LF1&#39;</span><span class="p">,</span> <span class="s1">&#39;LF2&#39;</span><span class="p">,</span> <span class="s1">&#39;NOIS&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT1&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT2&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="s1">&#39;SMW-B9&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span> <span class="ow">and</span> <span class="s1">&#39;SMW-K24&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aprent</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
            <span class="n">sv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;INT&#39;</span><span class="p">,</span> <span class="s1">&#39;LF1&#39;</span><span class="p">,</span> <span class="s1">&#39;LF2&#39;</span><span class="p">,</span> <span class="s1">&#39;NOIS&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT1&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT2&#39;</span><span class="p">,</span> <span class="s1">&#39;INTB&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;INT&#39;</span><span class="p">,</span> <span class="s1">&#39;LF1&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT1&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT2&#39;</span><span class="p">]</span> \
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chnum</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="p">[</span><span class="s1">&#39;LF1&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT1&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT2&#39;</span><span class="p">]</span>
        <span class="c1"># Generate part of the docstring value according to the validator strings</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">_MODULATION_SIGNAL_DOC_POOL</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">sv</span><span class="p">:</span>
                <span class="n">ds</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;source&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Source&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:FM</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;SOUR </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:FM</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:SOUR?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="o">*</span><span class="n">sv</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Selects the modulation source. Values are:&quot;</span><span class="o">+</span><span class="n">ds</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;SMW-XXX&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span><span class="p">:</span> <span class="c1">#TODO: welche Option wird hierfür benötigt?</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;coupling_mode&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Coupling mode&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;FM:DEV:MODE </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;FM:DEV:MODE?&#39;</span><span class="p">,</span>
                               <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;UNC&#39;</span><span class="p">,</span> <span class="s1">&#39;TOT&#39;</span><span class="p">,</span> <span class="s1">&#39;RAT&#39;</span><span class="p">))</span>

        <span class="k">if</span> <span class="s1">&#39;SMW-XXX&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span><span class="p">:</span> <span class="c1">#TODO: welche Option wird hierfür benötigt?</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;total_deviation&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Total deviation&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;FM:DEV:SUM </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;FM:DEV:SUM?&#39;</span><span class="p">,</span>
                               <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                               <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">40e6</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;deviation_ratio&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Deviation ratio&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;FM:RAT </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;FM:RAT?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;%&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Sets the deviation ratio (path2 to path1) in percent.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Mode&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;FM:MODE </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;FM:MODE?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;NORM&#39;</span><span class="p">,</span> <span class="s1">&#39;LNO&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Selects the mode for the frequency modulation.&quot;</span>
                                     <span class="s2">&quot; &#39;NOR&#39;=normal mode, &#39;LNO&#39;=low noise mode&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;sensitivity&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Sensitivity&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;FM:SENS?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;Hz/V&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;(ReadOnly) Queries the sensitivity of the externally&quot;</span>
                                     <span class="s2">&quot; supplied signal for frequency modulation. The&quot;</span>
                                     <span class="s2">&quot; sensitivity depends on the set modulation deviation.&quot;</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="AmplitudeModulation">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.AmplitudeModulation">[docs]</a>
<span class="k">class</span> <span class="nc">AmplitudeModulation</span><span class="p">(</span><span class="n">InstrumentChannel</span><span class="p">):</span>

<div class="viewcode-block" id="AmplitudeModulation.__init__">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.AmplitudeModulation.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="s1">&#39;RohdeSchwarz_SMW200A&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">hwchan</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">chnum</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Combines all the parameters concerning the amplitude modulation. Activation</span>
<span class="sd">        of amplitude modulation deactivates ARB, I/Q modulation, digital modulation</span>
<span class="sd">        and all digital standards.</span>

<span class="sd">        Args:</span>
<span class="sd">            parent: the parent instrument of this channel</span>
<span class="sd">            name  : the internal QCoDeS name of this channel</span>
<span class="sd">            hwchan: the internal number of the hardware channel used in the communication</span>
<span class="sd">            chnum : the internal number of the channel used in the communication</span>

<span class="sd">        Attributes:</span>
<span class="sd">            state: actives/deactivates the amplitude modulation. Values are &#39;ON&#39; and &#39;OFF&#39;.</span>
<span class="sd">            source: Selects the modulation source. Values are:</span>
<span class="sd">                &#39;INT&#39;: internally generated LF signal = &#39;LF1&#39; (channel 2 only with option SMW-K24)</span>
<span class="sd">                &#39;EXT&#39;: externally supplied LF signal  = &#39;EXT1&#39; (channel 2 only with option SMW-K24)</span>
<span class="sd">                &#39;LF1&#39;: first internally generated signal</span>
<span class="sd">                &#39;LF2&#39;: second internally gererated signal (only available with option SMW-K24)</span>
<span class="sd">                &#39;NOIS&#39;: internally generated noise signal (only available with option SMW-K24)</span>
<span class="sd">                &#39;EXT1&#39;: first externally supplied signal</span>
<span class="sd">                &#39;EXT2&#39;: second externally supplied signal</span>
<span class="sd">            depth: Sets the depth of the amplitude modulation in percent.</span>
<span class="sd">            total_depth: Sets the total depth of the LF signal when using combined</span>
<span class="sd">                signal sources in amplitude modulation.</span>
<span class="sd">            coupling_mode: Selects the coupling mode. The coupling mode parameter also</span>
<span class="sd">                determines the modefor fixing the total depth. Values are:</span>
<span class="sd">                &#39;UNC&#39;: Does not couple the LF signals. The deviation depth values of</span>
<span class="sd">                both paths are independent.</span>
<span class="sd">                &#39;TOT&#39;: Couples the deviation depth of both paths.</span>
<span class="sd">                &#39;RAT&#39;: Couples the deviation depth ratio of both paths.</span>
<span class="sd">            deviation_ratio: Sets the deviation ratio (path2 to path1) in percent.</span>
<span class="sd">            sensitivity: (ReadOnly) Queries the sensitivity of the externally applied signal.</span>
<span class="sd">                The sensitivity depends on the set modulation depth. The returned value</span>
<span class="sd">                reports the sensitivity in %/V. It is assigned to the voltage value for</span>
<span class="sd">                full modulation of the input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span> <span class="o">=</span> <span class="n">hwchan</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">chnum</span> <span class="o">=</span> <span class="n">chnum</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;State&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:AM</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;STAT </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:AM</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:STAT?&#39;</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ON&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;ON&#39;</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                           Actives/deactivates the amplitude modulation. Values are &#39;ON&#39; and &#39;OFF&#39;.</span>
<span class="s2">                           Activation of amplitude modulation deactivates ARB, I/Q modulation,</span>
<span class="s2">                           digital modulation and all digital standards.</span>
<span class="s2">                           &quot;&quot;&quot;</span><span class="p">)</span>

        <span class="c1"># Select the set of available values from the installed options</span>
        <span class="k">if</span> <span class="s1">&#39;SMW-K24&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
            <span class="n">sv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;LF1&#39;</span><span class="p">,</span> <span class="s1">&#39;LF2&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT1&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT2&#39;</span><span class="p">,</span> <span class="s1">&#39;NOIS&#39;</span><span class="p">,</span> <span class="s1">&#39;INT&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;LF1&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT1&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT2&#39;</span><span class="p">,</span> <span class="s1">&#39;INT&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="n">chnum</span> <span class="o">==</span> <span class="mi">1</span> \
            <span class="k">else</span> <span class="p">[</span><span class="s1">&#39;LF1&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT1&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT2&#39;</span><span class="p">]</span>
        <span class="c1"># Generate part of the docstring value according to the validator strings</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">_MODULATION_SIGNAL_DOC_POOL</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">sv</span><span class="p">:</span>
                <span class="n">ds</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;source&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Source&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:AM</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;SOUR </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:AM</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:SOUR?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="o">*</span><span class="n">sv</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Selects the modulation source. Values are:&quot;</span><span class="o">+</span><span class="n">ds</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;depth&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Depth&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:AM</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;DEPT </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:AM</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:DEPT?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;%&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Sets the depth of the amplitude modulation in percent.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;SMW-XXX&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
            <span class="c1"># this function was disabled in the device but the needed option not documented in manual</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;total_depth&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Total depth&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;AM:DEPT:SUM </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;AM:DEPT:SUM?&#39;</span><span class="p">,</span>
                               <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                               <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>

        <span class="k">if</span> <span class="s1">&#39;SMW-XXX&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
            <span class="c1"># this function was disabled in the device but the needed option not documented in manual</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;coupling_mode&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Coupling mode&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;AM:DEV:MODE </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;AM:DEV:MODE?&#39;</span><span class="p">,</span>
                               <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;UNC&#39;</span><span class="p">,</span> <span class="s1">&#39;TOT&#39;</span><span class="p">,</span> <span class="s1">&#39;RAT&#39;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;deviation_ratio&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Deviation ratio&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;AM:RAT </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;AM:RAT?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;%&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Sets the deviation ratio (path2 to path1) in percent.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;sensitivity&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Sensitifity&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;AM:SENS?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;%/V&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;(ReadOnly) Queries the sensitivity of the externally&quot;</span>
                                     <span class="s2">&quot; applied signal. The sensitivity depends on the set&quot;</span>
                                     <span class="s2">&quot; modulation depth. The returned value reports the&quot;</span>
                                     <span class="s2">&quot; sensitivity in %/V. It is assigned to the voltage&quot;</span>
                                     <span class="s2">&quot; value for full modulation of the input.&quot;</span><span class="p">)</span></div>
</div>




<div class="viewcode-block" id="PulseModulation">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.PulseModulation">[docs]</a>
<span class="k">class</span> <span class="nc">PulseModulation</span><span class="p">(</span><span class="n">InstrumentChannel</span><span class="p">):</span>

<div class="viewcode-block" id="PulseModulation.__init__">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.PulseModulation.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="s1">&#39;RohdeSchwarz_SMW200A&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">hwchan</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Combines all the parameters concerning the pulse modulation.</span>

<span class="sd">        Args:</span>
<span class="sd">            parent: the parent instrument of this channel</span>
<span class="sd">            name  : the internal QCoDeS name of this channel</span>
<span class="sd">            hwchan: the internal number of the hardware channel used in the communication</span>


<span class="sd">        Attributes:</span>
<span class="sd">            state: Activates/deactivates the pulse modulation. Values are &#39;ON&#39; and &#39;OFF&#39;.</span>
<span class="sd">            source: Selects the modulation source. Values are:</span>

<span class="sd">                - &#39;INT&#39;: internally generated signal is used (only available with option SMW-K23)</span>
<span class="sd">                - &#39;EXT&#39;: externally supplied signal is used</span>

<span class="sd">            transition_type: sets the transition mode for the pulse signal. Values are:</span>

<span class="sd">                - &#39;SMO&#39;: flattens the slew , resulting in longer rise/fall times (SMOothed)</span>
<span class="sd">                - &#39;FAST&#39;: enables fast transition with shortest rise and fall times</span>

<span class="sd">            video_polarity: Sets the polarity of the pulse video (modulating) signal,</span>
<span class="sd">                related to the RF (modulated) signal. Values are:</span>

<span class="sd">                - &#39;NORM&#39;: the video signal follows the RF signal, that means it is high</span>
<span class="sd">                  when RF signal is high and vice versa</span>
<span class="sd">                - &#39;INV&#39;: the video signal follows in inverted mode</span>

<span class="sd">            polarity: sets the polarity of the externally applied modulation signal</span>

<span class="sd">                - &#39;NORM&#39;: Suppresses the RF signal during the pulse pause</span>
<span class="sd">                - &#39;INV&#39;: Suppresses the RF signal during the pulse</span>

<span class="sd">            impedance: Sets the impedance for the external pulse modulation input.</span>
<span class="sd">                Values are &#39;G50&#39; and &#39;G1K&#39;</span>
<span class="sd">            trigger_impedance: Sets the impedance for the external pulse trigger.</span>
<span class="sd">                Values are &#39;G50&#39; and &#39;G10K&#39;</span>

<span class="sd">            mode: (Only SMW-K23) Selects the mode for the pulse modulation. Values can be:</span>

<span class="sd">                - &#39;SING&#39;: generates a single pulse</span>
<span class="sd">                - &#39;DOUB&#39;: generates two pulses within one pulse period</span>

<span class="sd">            double_delay: (Only SMW-K23) Sets the delay from the start of the first pulse to the</span>
<span class="sd">                start of the second pulse.</span>
<span class="sd">            double_width: (Only SMW-K23) Sets the width of the second pulse.</span>
<span class="sd">            trigger_mode: (Only SMW-K23) Selects a trigger mode for generating the modulation</span>
<span class="sd">                signal. Values are &#39;AUTO&#39; (AUTOmatic), &#39;EXT&#39; (EXTernal), &#39;EGAT&#39; (External</span>
<span class="sd">                GATed), &#39;ESIN&#39; (External single).</span>
<span class="sd">            period: (Only SMW-K23) Sets the period of the generated pulse, that means the repetition</span>
<span class="sd">                frequency of the internally generated modulation signal.</span>
<span class="sd">            width: (Only SMW-K23) Sets the width of the generated pulse, that means the pulse</span>
<span class="sd">                length. It must be at least 20ns less than the set pulse period.</span>
<span class="sd">            delay: (Only SMW-K23) Sets the pulse delay.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span> <span class="o">=</span> <span class="n">hwchan</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;SMW-K23&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Mode&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PULM:MODE </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PULM:MODE?&#39;</span><span class="p">,</span>
                               <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;SING&#39;</span><span class="p">,</span> <span class="s1">&#39;DOUB&#39;</span><span class="p">),</span>
                               <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                               Selects the mode for the pulse modulation.</span>
<span class="s2">                               &#39;SING&#39;: generates a single pulse</span>
<span class="s2">                               &#39;DOUB&#39;: generates two pulses within one pulse period.</span>
<span class="s2">                               &quot;&quot;&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;double_delay&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Double delay&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PULM:DOUB:DEL </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PULM:DOUB:DEL?&#39;</span><span class="p">,</span>
                               <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                               <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Sets the delay from the start of the first&quot;</span>
                                         <span class="s2">&quot; pulse to the start of the second pulse.&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;double_width&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Double width&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PULM:DOUB:WID </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PULM:DOUB:WID?&#39;</span><span class="p">,</span>
                               <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                               <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Sets the width of the second pulse.&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;trigger_mode&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Trigger mode&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PULM:TRIG:MODE </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PULM:TRIG:MODE?&#39;</span><span class="p">,</span>
                               <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;AUTO&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT&#39;</span><span class="p">,</span> <span class="s1">&#39;EGAT&#39;</span><span class="p">,</span> <span class="s1">&#39;ESIN&#39;</span><span class="p">),</span>
                               <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Selects a trigger mode for generating the modulation&quot;</span>
                                         <span class="s2">&quot; signal. Values are &#39;AUTO&#39; (AUTOmatic), &#39;EXT&#39;&quot;</span>
                                         <span class="s2">&quot; (EXTernal), &#39;EGAT&#39; (External GATed), &#39;ESIN&#39;&quot;</span>
                                         <span class="s2">&quot; (External single).&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;period&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Period&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PULM:PER </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PULM:PER?&#39;</span><span class="p">,</span>
                               <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                               <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mf">20e-9</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
                               <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">,</span>
                               <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Sets the period of the generated pulse, that&quot;</span>
                                         <span class="s2">&quot; means the repetition frequency of the internally&quot;</span>
                                         <span class="s2">&quot; generated modulation signal.&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;width&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Width&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setwidth</span><span class="p">),</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PULM:WIDT?&#39;</span><span class="p">,</span>
                               <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                               <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mf">20e-9</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
                               <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">,</span>
                               <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Sets the width of the generated pulse, that&quot;</span>
                                         <span class="s2">&quot; means the pulse length. It must be at least&quot;</span>
                                         <span class="s2">&quot; 20ns less than the set pulse period.&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;delay&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Delay&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PULM:DEL </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PULM:DEL?&#39;</span><span class="p">,</span>
                               <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                               <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(),</span>
                               <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">,</span>
                               <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Sets the pulse delay.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;State&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PULM:STAT </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PULM:STAT?&#39;</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ON&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;ON&#39;</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Activates/deactivates the pulse modulation.&quot;</span>
                                     <span class="s2">&quot; Values are &#39;ON&#39; and &#39;OFF&#39;.&quot;</span><span class="p">)</span>

        <span class="n">sv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;INT&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;SMW-K23&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span> <span class="k">else</span> <span class="p">[</span><span class="s1">&#39;EXT&#39;</span><span class="p">]</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="s1">&#39;INT&#39;</span> <span class="ow">in</span> <span class="n">sv</span><span class="p">:</span>
            <span class="n">ds</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&#39;INT&#39;: internally generated signal&quot;</span>
        <span class="k">if</span> <span class="s1">&#39;EXT&#39;</span> <span class="ow">in</span> <span class="n">sv</span><span class="p">:</span>
            <span class="n">ds</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&#39;EXT&#39;: externally supplied signal&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;source&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Source&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PULM:SOUR </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PULM:SOUR?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="o">*</span><span class="n">sv</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Selects the modulation source. Values are:&quot;</span><span class="o">+</span><span class="n">ds</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;transition_type&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Transition type&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PULM:TTYP </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PULM:TTYP?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;SMO&#39;</span><span class="p">,</span> <span class="s1">&#39;FAST&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                           Sets the transition mode for the pulse signal.</span>
<span class="s2">                           &#39;SMO&#39;: flattens the slew, resulting in longer rise/fall times (SMOothed),</span>
<span class="s2">                           &#39;FAST&#39;: enables fast transition with shortest rise and fall times</span>
<span class="s2">                           &quot;&quot;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;video_polarity&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Video polaraity&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PULM:OUTP:VID:POL </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PULM:OUTP:VID:POL?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;NORM&#39;</span><span class="p">,</span> <span class="s1">&#39;INV&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                           Sets the polarity of the pulse video (modulating) signal, related to</span>
<span class="s2">                           the RF (modulated) signal.</span>
<span class="s2">                           &#39;NORM&#39;: the video signal follows the RF signal, that means it is high</span>
<span class="s2">                            when RF signal is high and vice versa</span>
<span class="s2">                           &#39;INV&#39;: the video signal follows in inverted mode</span>
<span class="s2">                           &quot;&quot;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;polarity&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Polarity&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PULM:POL </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PULM:POL?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;NORM&#39;</span><span class="p">,</span> <span class="s1">&#39;INV&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                           sets the polarity of the externally applied modulation signal</span>
<span class="s2">                           &#39;NORM&#39;: Suppresses the RF signal during the pulse pause</span>
<span class="s2">                           &#39;INV&#39;: Suppresses the RF signal during the pulse</span>
<span class="s2">                           &quot;&quot;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;impedance&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Impedance&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PULM:IMP </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PULM:IMP?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;G50&#39;</span><span class="p">,</span> <span class="s1">&#39;G1K&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Sets the impedance for the external pulse modulation&quot;</span>
                                     <span class="s2">&quot; input. Values are &#39;G50&#39; and &#39;G1K&#39;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;trigger_impedance&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Trigger impedance&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PULM:TRIG:EXT:IMP </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PULM:TRIG:EXT:IMP?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;G50&#39;</span><span class="p">,</span> <span class="s1">&#39;G10K&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Sets the impedance for the external pulse trigger.&quot;</span>
                                     <span class="s2">&quot; Values are &#39;G50&#39; and &#39;G10K&#39;&quot;</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="nf">_setwidth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Helper function to check the maximum allowed value for the step</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">maxwidth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">period</span><span class="p">()</span><span class="o">-</span><span class="mf">20e-9</span>
        <span class="k">if</span> <span class="n">val</span> <span class="o">&gt;</span> <span class="n">maxwidth</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">val</span><span class="p">)</span><span class="si">}</span><span class="s1"> is invalid: must be between 20e-9 and </span><span class="si">{</span><span class="n">maxwidth</span><span class="si">}</span><span class="s1"> &#39;</span>
                             <span class="sa">f</span><span class="s1">&#39;inclusive.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:PULM:WIDT </span><span class="si">{</span><span class="n">val</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span></div>




<div class="viewcode-block" id="PulseGenerator">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.PulseGenerator">[docs]</a>
<span class="k">class</span> <span class="nc">PulseGenerator</span><span class="p">(</span><span class="n">InstrumentChannel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Configurations for the Pulse Generator set with another subclasses:</span>
<span class="sd">        Pulse Mode         -&gt; PulseModulation.mode()</span>
<span class="sd">        Trigger Mode       -&gt; PulseModulation.trigger_mode()</span>
<span class="sd">        Pulse Period       -&gt; PulseModulation.period()</span>
<span class="sd">        Pulse Width        -&gt; PulseModulation.width()</span>
<span class="sd">        Double Pulse Width -&gt; PulseModulation.double_width()</span>
<span class="sd">        Pulse Delay        -&gt; PulseModulation.delay()</span>
<span class="sd">        Double Pulse Delay -&gt; PulseModulation.double_delay()</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="PulseGenerator.__init__">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.PulseGenerator.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="s1">&#39;RohdeSchwarz_SMW200A&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">hwchan</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Combines all the parameters concerning the pulse generator for setting output</span>
<span class="sd">        of the pulse modulation signal. Available only with option SMW-K23 installed.</span>

<span class="sd">        Args:</span>
<span class="sd">            parent: the parent instrument of this channel</span>
<span class="sd">            name  : the internal QCoDeS name of this channel</span>
<span class="sd">            hwchan: the internal number of the hardware channel used in the communication</span>

<span class="sd">        Attributes:</span>
<span class="sd">            polarity: Sets the polarity of the pulse output signal. Values are:</span>
<span class="sd">                &#39;NORM&#39;: Outputs the pulse signal during the pulse width, that means during</span>
<span class="sd">                the high state.</span>
<span class="sd">                &#39;INV&#39;: Inverts the pulse output signal polarity. The pulse output signal</span>
<span class="sd">                is suppressed during the pulse width, but provided during the low state.</span>
<span class="sd">            output: Activates the output of the pulse modulation signal. Values are: &#39;OFF&#39; or &#39;ON&#39;.</span>
<span class="sd">            state: Enables the output of the video/sync signal. If the pulse generator is the</span>
<span class="sd">                current modulation source, activating the pulse modulation automatically</span>
<span class="sd">                activates the signal output and the pulse generator.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span> <span class="o">=</span> <span class="n">hwchan</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="s1">&#39;SMW-K23&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Invalid usage of class without installed option K23&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;polarity&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Polarity&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PGEN:OUTP:POL </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PGEN:OUTP:POL?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;NORM&#39;</span><span class="p">,</span> <span class="s1">&#39;INV&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                           Sets the polarity of the pulse output signal.</span>
<span class="s2">                           &#39;NORM&#39;: Outputs the pulse signal during the pulse width,</span>
<span class="s2">                           that means during the high state.</span>
<span class="s2">                           &#39;INV&#39;: Inverts the pulse output signal polarity. The</span>
<span class="s2">                           pulse output signal is suppressed during the pulse width,</span>
<span class="s2">                           but provided during the low state.</span>
<span class="s2">                           &quot;&quot;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;output&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Output&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PGEN:OUTP:STAT </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PGEN:OUTP:STAT?&#39;</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ON&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;ON&#39;</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                           Activates the output of the pulse modulation signal.</span>
<span class="s2">                           Possible values: OFF or ON.</span>
<span class="s2">                           &quot;&quot;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;State&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PGEN:STAT </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PGEN:STAT?&#39;</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ON&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;ON&#39;</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                           Enables the output of the video/sync signal.</span>
<span class="s2">                           If the pulse generator is the current modulation source,</span>
<span class="s2">                           activating the pulse modulation automatically activates</span>
<span class="s2">                           the signal output and the pulse generator.</span>
<span class="s2">                           Possible values: OFF or ON.</span>
<span class="s2">                           &quot;&quot;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PGEN:STAT </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PGEN:STAT?&#39;</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ON&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;ON&#39;</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                           &quot;&quot;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;State&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PGEN:STAT </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PGEN:STAT?&#39;</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ON&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;ON&#39;</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                           &quot;&quot;&quot;</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="PhaseModulation">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.PhaseModulation">[docs]</a>
<span class="k">class</span> <span class="nc">PhaseModulation</span><span class="p">(</span><span class="n">InstrumentChannel</span><span class="p">):</span>

<div class="viewcode-block" id="PhaseModulation.__init__">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.PhaseModulation.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="s1">&#39;RohdeSchwarz_SMW200A&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">hwchan</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">chnum</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Combines all the parameters concerning the phase modulation.</span>

<span class="sd">        Args:</span>
<span class="sd">            parent: the parent instrument of this channel</span>
<span class="sd">            name  : the internal QCoDeS name of this channel</span>
<span class="sd">            hwchan: the internal number of the hardware channel used in the communication</span>
<span class="sd">            chnum : the internal number of the channel used in the communication</span>

<span class="sd">        Attributes:</span>
<span class="sd">            state: Activates or deactivates phase modulation. Activation of phase modulation</span>
<span class="sd">                deactivates frequency modulation. Possible values are &#39;ON&#39; and &#39;OFF&#39;.</span>
<span class="sd">            deviation: Sets the modulation deviation of the phase modulation in RAD.</span>
<span class="sd">            source: Selects the modulation source. Values are:</span>
<span class="sd">                &#39;INT&#39;: internally generated LF signal = &#39;LF1&#39; (channel 2 only with option SMW-K24)</span>
<span class="sd">                &#39;EXT&#39;: externally supplied LF signal  = &#39;EXT1&#39; (channel 2 only with option SMW-K24)</span>
<span class="sd">                &#39;LF1&#39;: first internally generated signal</span>
<span class="sd">                &#39;LF2&#39;: second internally gererated signal (only available with option SMW-K24)</span>
<span class="sd">                &#39;NOIS&#39;: internally generated noise signal (only available with option SMW-K24)</span>
<span class="sd">                &#39;EXT1&#39;: first externally supplied signal</span>
<span class="sd">                &#39;EXT2&#39;: second externally supplied signal</span>
<span class="sd">                &#39;INTB&#39;: internal baseband signal (only available with option SMW-B9)</span>
<span class="sd">            mode: Selects the mode for the phase modulation. Possible values are:</span>
<span class="sd">                &#39;HBAN&#39;: sets the maximum available bandwidth (High BANdwidth)</span>
<span class="sd">                &#39;HDEV&#39;: sets the maximum range for deviation (High DEViation)</span>
<span class="sd">                &#39;LNO&#39;: selects a phase modulation mode with phase noise and spurious</span>
<span class="sd">                characteristics close to CW mode. (Low NOise)</span>
<span class="sd">            coupling_mode: Selects the coupling mode. Possible values are:</span>
<span class="sd">                &#39;UNC&#39;: Does not couple the LF signals. The deviation of both paths are independent.</span>
<span class="sd">                &#39;TOT&#39;: Couples the deviation of both paths.</span>
<span class="sd">                &#39;RAT&#39;: Couples the deviation ratio of both paths.</span>
<span class="sd">            total_deviation: Sets the total deviation of the LF signal when using</span>
<span class="sd">                combined signal sources. Possible values range from 0 to 20.</span>
<span class="sd">            ratio: Sets the deviation ratio (path2 to path1) in percent.</span>
<span class="sd">            sensitivity: Queries the sensitivity of the externally applied signal for phase</span>
<span class="sd">                modulation. The returned value reports the sensitivity in RAD/V. It is assigned</span>
<span class="sd">                to the voltage value for full modulation of the input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span> <span class="o">=</span> <span class="n">hwchan</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">chnum</span> <span class="o">=</span> <span class="n">chnum</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;State&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:PM</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;STAT </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:PM</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:STAT?&#39;</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ON&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;ON&#39;</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Activates or deactivates phase modulation. Values are&quot;</span>
                                     <span class="s2">&quot; &#39;ON&#39; and &#39;OFF&#39;. Activation of phase modulation&quot;</span>
                                     <span class="s2">&quot; deactivates frequency modulation.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;deviation&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Deviation&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR:PM</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;DEV </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR:PM</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:DEV?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;RAD&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Sets the modulation deviation of the phase&quot;</span>
                                     <span class="s2">&quot;modulation in RAD.&quot;</span><span class="p">)</span>

        <span class="c1"># Select the set of available values from the installed options</span>
        <span class="k">if</span> <span class="s1">&#39;SMW-B9&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span> <span class="ow">and</span> <span class="ow">not</span> <span class="s1">&#39;SMW-K24&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
            <span class="n">sv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;INT&#39;</span><span class="p">,</span> <span class="s1">&#39;LF1&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT1&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT2&#39;</span><span class="p">,</span> <span class="s1">&#39;INTB&#39;</span><span class="p">]</span> \
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chnum</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="p">[</span><span class="s1">&#39;LF1&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT1&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT2&#39;</span><span class="p">,</span> <span class="s1">&#39;INTB&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="s1">&#39;SMW-B9&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span> <span class="ow">and</span> <span class="s1">&#39;SMW-K24&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
            <span class="n">sv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;INT&#39;</span><span class="p">,</span> <span class="s1">&#39;LF1&#39;</span><span class="p">,</span> <span class="s1">&#39;LF2&#39;</span><span class="p">,</span> <span class="s1">&#39;NOIS&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT1&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT2&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="s1">&#39;SMW-B9&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span> <span class="ow">and</span> <span class="s1">&#39;SMW-K24&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aprent</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
            <span class="n">sv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;INT&#39;</span><span class="p">,</span> <span class="s1">&#39;LF1&#39;</span><span class="p">,</span> <span class="s1">&#39;LF2&#39;</span><span class="p">,</span> <span class="s1">&#39;NOIS&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT1&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT2&#39;</span><span class="p">,</span> <span class="s1">&#39;INTB&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;INT&#39;</span><span class="p">,</span> <span class="s1">&#39;LF1&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT1&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT2&#39;</span><span class="p">]</span> \
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chnum</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="p">[</span><span class="s1">&#39;LF1&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT1&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT2&#39;</span><span class="p">]</span>
        <span class="c1"># Generate part of the docstring value according to the validator strings</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">_MODULATION_SIGNAL_DOC_POOL</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">sv</span><span class="p">:</span>
                <span class="n">ds</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;source&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Source&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:PM</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;SOUR </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:PM</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:SOUR?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="o">*</span><span class="n">sv</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Selects the modulations source. Values are:&quot;</span><span class="o">+</span><span class="n">ds</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Mode&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PM:MODE </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PM:MODE?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;HBAN&#39;</span><span class="p">,</span> <span class="s1">&#39;HDEV&#39;</span><span class="p">,</span> <span class="s1">&#39;LNO&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                           Selects the mode for the phase modulation. Possible values are:</span>
<span class="s2">                           &#39;HBAN&#39;: sets the maximum available bandwidth (High BANdwidth)</span>
<span class="s2">                           &#39;HDEV&#39;: sets the maximum range for deviation (High DEViation)</span>
<span class="s2">                           &#39;LNO&#39;: selects a phase modulation mode with phase noise and spurious</span>
<span class="s2">                               characteristics close to CW mode. (Low NOise)</span>
<span class="s2">                           &quot;&quot;&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;SMW-XXX&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span><span class="p">:</span> <span class="c1">#TODO: welche Option wird hierfür benötigt?</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;coupling_mode&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Coupling mode&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PM:DEV:MODE </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PM:DEV:MODE?&#39;</span><span class="p">,</span>
                               <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;UNC&#39;</span><span class="p">,</span> <span class="s1">&#39;TOT&#39;</span><span class="p">,</span> <span class="s1">&#39;RAT&#39;</span><span class="p">))</span>

        <span class="k">if</span> <span class="s1">&#39;SMW-XXX&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span><span class="p">:</span> <span class="c1">#TODO: welche Option wird hierfür benötigt?</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;total_deviation&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Total deviation&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PM:DEV:SUM </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PM:DEV:SUM?&#39;</span><span class="p">,</span>
                               <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;ratio&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Ratio&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PM:RAT </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PM:RAT?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;%&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Sets the deviation ratio (path2 to path1) in percent.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;sensitivity&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Sensitivity&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;PM:SENS?&#39;</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;RAD/V&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;(ReadOnly) Queries the sensitivity of the externally&quot;</span>
                                     <span class="s2">&quot; applied signal for phase modulation. The returned&quot;</span>
                                     <span class="s2">&quot; value reports the sensitivity in RAD/V. It is assigned&quot;</span>
                                     <span class="s2">&quot; to the voltage value for full modulation of the input.&quot;</span><span class="p">)</span></div>
</div>




<div class="viewcode-block" id="LFOutputSweep">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.LFOutputSweep">[docs]</a>
<span class="k">class</span> <span class="nc">LFOutputSweep</span><span class="p">(</span><span class="n">InstrumentChannel</span><span class="p">):</span>

<div class="viewcode-block" id="LFOutputSweep.__init__">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.LFOutputSweep.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="s1">&#39;RohdeSchwarz_SMW200A&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">hwchan</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Combines all the parameters concerning one LF output Sweeping. The LF output</span>
<span class="sd">        is used as modulation signal for the analog modulation.</span>

<span class="sd">        Args:</span>
<span class="sd">            parent: the parent instrument of this channel</span>
<span class="sd">            name  : the internal QCoDeS name of this channel</span>
<span class="sd">            hwchan: the internal number of the hardware channel used in the communication</span>

<span class="sd">        Attributes:</span>
<span class="sd">            dwell: Dwell time in seconds from 0.5 ms to 100 s.</span>
<span class="sd">            mode: Cycle mode for level sweep.</span>
<span class="sd">                &#39;AUTO&#39;: Each trigger triggers exactly one complete sweep.</span>
<span class="sd">                &#39;MAN&#39;:  You can trigger every step individually with a command.</span>
<span class="sd">                &#39;STEP&#39;: Each trigger triggers one sweep step only.</span>
<span class="sd">            points: Steps within level sweep range</span>
<span class="sd">            shape: Waveform shape for sweep. Allowed values are &#39;SAWTOOTH&#39; and &#39;TRIANGLE&#39;</span>
<span class="sd">            execute: Executes one RF level sweep. Use this without any ( )</span>
<span class="sd">            retrace: Activates that the signal changes to the start frequency value while it is</span>
<span class="sd">                waiting for the next trigger event. Values are &#39;ON&#39; and &#39;OFF&#39;. You can enable this</span>
<span class="sd">                feature, when you are working with sawtooth shapes in sweep mode &#39;MAN&#39; or &#39;STEP&#39;.</span>
<span class="sd">            running: (ReadOnly) Reports the current sweep state. Returnvalues are &#39;ON&#39; or &#39;OFF&#39;.</span>
<span class="sd">            spacing: calculationmode of frequency intervals. Values are &#39;LIN&#39; or &#39;LOG&#39;</span>
<span class="sd">            log_step: Sets the step width factor for logarithmic sweeps to calculate</span>
<span class="sd">                the frequencies of the steps. The value can be from 0.01% upto 100%.</span>
<span class="sd">            lin_step: Set the step size for linear sweep. The value can be from 0.01</span>
<span class="sd">                up to the value of &lt;OutputChannel::sweep_span&gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span> <span class="o">=</span> <span class="n">hwchan</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;dwell&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Dwell time&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO:SWE:&#39;</span> <span class="o">+</span> <span class="s1">&#39;DWEL </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO:SWE:DWEL?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mf">0.0005</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Dwell time in seconds from 0.5 ms to 100 s.&quot;</span><span class="p">)</span>

        <span class="n">sweepmode</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;AUTO&#39;</span><span class="p">,</span> <span class="s1">&#39;MAN&#39;</span><span class="p">,</span> <span class="s1">&#39;STEP&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Cycle mode for level sweep&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO:SWE:&#39;</span> <span class="o">+</span> <span class="s1">&#39;MODE </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO:SWE:MODE?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">sweepmode</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                           Cycle mode for level sweep. Values are:</span>
<span class="s2">                           &#39;AUTO&#39;: Each trigger triggers exactly one complete sweep.</span>
<span class="s2">                           &#39;MAN&#39;: You can trigger every step individually with a command.</span>
<span class="s2">                           &#39;STEP&#39;: Each trigger triggers one sweep step only.</span>
<span class="s2">                           &quot;&quot;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;points&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Steps within level sweep range&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO:SWE:&#39;</span> <span class="o">+</span> <span class="s1">&#39;POIN </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO:SWE:POIN?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>  <span class="c1"># Upperlimit=MAXINT</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Steps within level sweep range&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;shape&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Waveform shape for sweep&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO:SWE:&#39;</span> <span class="o">+</span> <span class="s1">&#39;SHAP </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO:SWE:SHAP?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;SAWTOOTH&#39;</span><span class="p">,</span> <span class="s1">&#39;TRIANGLE&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Waveform shape for sweep. Allowed values&quot;</span>
                                     <span class="s2">&quot; are &#39;SAWTOOTH&#39; and &#39;TRIANGLE&#39;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_function</span><span class="p">(</span><span class="s1">&#39;execute&#39;</span><span class="p">,</span>
                           <span class="n">call_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO:SWE:EXEC&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Executes one RF level sweep. Use this without any ( )&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;retrace&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Set to start frequency while waiting for trigger  &#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO:SWE:&#39;</span> <span class="o">+</span> <span class="s1">&#39;RETR </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO:SWE:RETR?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;ON&#39;</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Activates that the signal changes to the start frequency&quot;</span>
                                     <span class="s2">&quot; value while it is waiting for the next trigger event.&quot;</span>
                                     <span class="s2">&quot; Values are &#39;ON&#39; and &#39;OFF&#39;. You can enable this feature,&quot;</span>
                                     <span class="s2">&quot; when you are working with sawtooth shapes in sweep mode&quot;</span>
                                     <span class="s2">&quot; &#39;MAN&#39; or &#39;STEP&#39;.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;running&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Current sweep state&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO:SWE:RUNN?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;ON&#39;</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;(ReadOnly) Reports the current sweep state.&quot;</span>
                                     <span class="s2">&quot; Returnvalues are &#39;ON&#39; or &#39;OFF&#39;.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;spacing&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;calculationmode of frequency intervals&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO:SWE:&#39;</span> <span class="o">+</span> <span class="s1">&#39;SPAC </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO:SWE:SPAC?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;LIN&#39;</span><span class="p">,</span> <span class="s1">&#39;LOG&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Calculationmode of frequency intervals.&quot;</span>
                                     <span class="s2">&quot; Values are &#39;LIN&#39; or &#39;LOG&#39;.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;log_step&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;logarithmically determined step size for the RF freq sweep&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO:SWE:STEP:&#39;</span> <span class="o">+</span> <span class="s1">&#39;LOG </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO:SWE:STEP:LOG?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;%&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Sets the step width factor for logarithmic sweeps&quot;</span>
                                     <span class="s2">&quot; to calculate the frequencies of the steps. The&quot;</span>
                                     <span class="s2">&quot; value can be from 0.01</span><span class="si">% u</span><span class="s2">pto 100%.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;lin_step&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;step size for linear RF freq sweep&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setlinstep</span><span class="p">),</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO:SWE:STEP?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mf">0.01</span><span class="p">),</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;Hz&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                           Set the step size for linear sweep.</span>
<span class="s2">                           The maximum is the sweep_span of the output channel</span>
<span class="s2">                           and will be read during the set lin_step command.</span>
<span class="s2">                           &quot;&quot;&quot;</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="nf">_setlinstep</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Helper function to check the maximum allowed value for the step</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">maxfreq</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:FREQ:SPAN?&#39;</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">val</span> <span class="o">&gt;</span> <span class="n">maxfreq</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">val</span><span class="p">)</span><span class="si">}</span><span class="s1"> is invalid: must be between 0.01 and </span><span class="si">{</span><span class="n">maxfreq</span><span class="si">}</span><span class="s1"> &#39;</span>
                             <span class="sa">f</span><span class="s1">&#39;inclusive.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO:SWE:STEP </span><span class="si">{</span><span class="n">val</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span></div>



<div class="viewcode-block" id="LFOutputChannel">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.LFOutputChannel">[docs]</a>
<span class="k">class</span> <span class="nc">LFOutputChannel</span><span class="p">(</span><span class="n">InstrumentChannel</span><span class="p">):</span>

<div class="viewcode-block" id="LFOutputChannel.__init__">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.LFOutputChannel.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="s1">&#39;RohdeSchwarz_SMW200A&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">hwchan</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">lfchan</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Combines all the parameters concerning one LF output. The LF output is used</span>
<span class="sd">        as modulation signal for the analog modulation.</span>

<span class="sd">        Args:</span>
<span class="sd">            parent: the parent instrument of this channel</span>
<span class="sd">            name  : the internal QCoDeS name of this channel</span>
<span class="sd">            hwchan: the internal number of the hardware channel used in the communication</span>
<span class="sd">            lfchan: the internal number of the LF output channel used</span>

<span class="sd">        Attributes:</span>
<span class="sd">            bandwidth: (ReadOnly) Requests the current bandwidth.</span>
<span class="sd">    </span>
<span class="sd">            state: (hwchan=1) The state of the output. Values are &#39;ON&#39; or &#39;OFF&#39;.</span>
<span class="sd">            offset: (hwchan=1) DC offset voltage in the range from -3.6V to +3.6V.</span>
<span class="sd">            source: (hwchan=1) Determines the LF signal to be synchronized if monitoring is enabled.</span>
<span class="sd">    </span>
<span class="sd">                - &#39;LF1&#39;, &#39;LF2&#39;, &#39;LF1A&#39;, &#39;LF2A&#39;, &#39;LF1B&#39;, &#39;LF2B&#39;: Selects an internally generated</span>
<span class="sd">                  LF signal.</span>
<span class="sd">                - &#39;NOISE&#39;, &#39;NOISA&#39;, &#39;NOISB&#39;: Selects an internally generated noise signal.</span>
<span class="sd">                - &#39;EXT1&#39;, &#39;EXT2&#39;: Selects an externally supplied LF signal.</span>
<span class="sd">                - &#39;AM&#39;, &#39;AMA&#39;, &#39;AMB&#39;: Selects the AM signal.</span>
<span class="sd">                - &#39;FMPM&#39;, &#39;FMPMA&#39;, &#39;FMPMB&#39;: Selects the signal also used by the frequency or phase</span>
<span class="sd">                  modulations.</span>
<span class="sd">    </span>
<span class="sd">            source_path: (hwchan=1) Path of the LF output source. Values are &#39;A&#39; or &#39;B&#39;.</span>
<span class="sd">            voltage: (hwchan=1) Output voltage of the LF output. The valid range will be dynamic</span>
<span class="sd">            as shown in the datasheet.</span>
<span class="sd">    </span>
<span class="sd">            period: (lfchan=1, ReadOnly). Queries the repetition frequency of the sine signal.</span>
<span class="sd">            frequency: (lfchan=1) The Frequency of the LF signal when the mode() is &#39;FIX&#39;. Valid range is from 0.1Hz and ends</span>
<span class="sd">            depending on the installed options.</span>
<span class="sd">            freq_manual: (lfchan=1) Manual frequency set only valid in the range given by the parameters freq_min and freq_max.</span>
<span class="sd">            freq_min: (lfchan=1) Set minimum for manual frequency from 0.1Hz to 1MHz.</span>
<span class="sd">            freq_max: (lfchan=1) Set maximum for manual frequency from 0.1Hz to 1MHz.</span>
<span class="sd">            mode: (lfchan=1) Set the used mode:</span>
<span class="sd">    </span>
<span class="sd">                - &#39;FIX&#39;: fixed frequency mode (CW is a synonym)</span>
<span class="sd">                - &#39;SWE&#39;: set sweep mode (use LFOutputSweep class)</span>
<span class="sd">    </span>
<span class="sd">            shape: (SMW-K24) Define the shape of the signal.</span>
<span class="sd">            Valid values: &#39;SINE&#39;,&#39;SQUARE&#39;,&#39;TRIANGLE&#39;,&#39;TRAPEZE&#39;.</span>
<span class="sd">            shape_duty_cycle: (SMW-K24) Duty cycle for shape pulse (range 1e-6 to 100)</span>
<span class="sd">            shape_period: (SMW-K24) Period for shape pulse (range 1e-6 to 100)</span>
<span class="sd">            shape_width: (SMW-K24) Width for shape pulse (range 1e-6 to 100)</span>
<span class="sd">            trapez_fall: (SMW-K24) Fall time for the trapezoid shape (range 1e-6 to 100)</span>
<span class="sd">            trapez_height: (SMW-K24) High time for the trapezoid signal (range 1e-6 to 100)</span>
<span class="sd">            trapez_period: (SMW-K24) Period of the generated trapezoid shape (range 1e-6 to 100)</span>
<span class="sd">            trapez_rise: (SMW-K24) Rise time for the trapezoid shape (range 1e-6 to 100)</span>
<span class="sd">            triangle_period: (SMW-K24) Period of the generated pulse (range 1e-6 to 100)</span>
<span class="sd">            triangle_rise: (SMW-K24) Rise time for the triangle shape (range 1e-6 to 100)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span> <span class="o">=</span> <span class="n">hwchan</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span> <span class="o">=</span> <span class="n">lfchan</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

        <span class="c1"># aks the limits for &quot;freq_manual&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">freqmin</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO:FREQ:STAR?&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">freqmax</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO:FREQ:STOP?&#39;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;bandwidth&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Bandwidth&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">:BAND?&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;(ReadOnly) Requests the current bandwidth.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;SMW-K24&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
            <span class="n">shape_ids</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;SINE&#39;</span><span class="p">,</span> <span class="s1">&#39;SQUARE&#39;</span><span class="p">,</span> <span class="s1">&#39;TRIANGLE&#39;</span><span class="p">,</span> <span class="s1">&#39;TRAPEZE&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;shape&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Shape&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s1">&#39;:SHAP </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">:SHAP?&#39;</span><span class="p">,</span>
                               <span class="n">vals</span><span class="o">=</span><span class="n">shape_ids</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;shape_duty_cycle&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Duty cycle for shape pulse&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">:SHAP:PULS&#39;</span> <span class="o">+</span> <span class="s1">&#39;:DCYC </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">:SHAP:PULS:DCYC?&#39;</span><span class="p">,</span>
                               <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                               <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mf">1e-6</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
                               <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;%&#39;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;shape_period&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Period for shape pulse&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">:SHAP:PULS&#39;</span> <span class="o">+</span> <span class="s1">&#39;:PER </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">:SHAP:PULS:PER?&#39;</span><span class="p">,</span>
                               <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                               <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mf">1e-6</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;shape_width&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Width for shape pulse&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">:SHAP:PULS&#39;</span> <span class="o">+</span> <span class="s1">&#39;:WIDT </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">:SHAP:PULS:WIDT?&#39;</span><span class="p">,</span>
                               <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                               <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mf">1e-6</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;trapez_fall&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Fall time for the trapezoid shape&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">:SHAP:TRAP&#39;</span> <span class="o">+</span> <span class="s1">&#39;:FALL </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">:SHAP:TRAP:FALL?&#39;</span><span class="p">,</span>
                               <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                               <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mf">1e-6</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;trapez_height&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;High time for the trapezoid signal&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">:SHAP:TRAP&#39;</span> <span class="o">+</span> <span class="s1">&#39;:HIGH </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">:SHAP:TRAP:HIGH?&#39;</span><span class="p">,</span>
                               <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                               <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mf">1e-6</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;trapez_period&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Period of the generated trapezoid shape&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">:SHAP:TRAP&#39;</span> <span class="o">+</span> <span class="s1">&#39;:PER </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">:SHAP:TRAP:PER?&#39;</span><span class="p">,</span>
                               <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                               <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mf">1e-6</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;trapez_rise&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Rise time for the trapezoid shape&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">:SHAP:TRAP&#39;</span> <span class="o">+</span> <span class="s1">&#39;:RISE </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">:SHAP:TRAP:RISE?&#39;</span><span class="p">,</span>
                               <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                               <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mf">1e-6</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;triangle_period&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;period of the generated pulse&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">:SHAP:TRI&#39;</span> <span class="o">+</span> <span class="s1">&#39;:PER </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">:SHAP:TRI:PER?&#39;</span><span class="p">,</span>
                               <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                               <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mf">1e-6</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;triangle_rise&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Rise time for the triangle shape&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">:SHAP:TRI&#39;</span> <span class="o">+</span> <span class="s1">&#39;:RISE </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">:SHAP:TRI:RISE?&#39;</span><span class="p">,</span>
                               <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                               <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mf">1e-6</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>


        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1"># The following parameters are only available for the SOURCE1</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;State&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s1">&#39;:STAT </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">:STAT?&#39;</span><span class="p">,</span>
                               <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ON&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                               <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;ON&#39;</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">),</span>
                               <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;The state of the output. Values are &#39;ON&#39; or &#39;OFF&#39;.&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;offset&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;DC offset voltage&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s1">&#39;:OFFS </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">:OFFS?&#39;</span><span class="p">,</span>
                               <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                               <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="o">-</span><span class="mf">3.6</span><span class="p">,</span> <span class="o">+</span><span class="mf">3.6</span><span class="p">),</span>
                               <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;V&#39;</span><span class="p">,</span>
                               <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;DC offset voltage in the range from -3.6V to +3.6V.&quot;</span><span class="p">)</span>

            <span class="n">source_val</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;LF1&#39;</span><span class="p">,</span> <span class="s1">&#39;LF2&#39;</span><span class="p">,</span> <span class="s1">&#39;NOISE&#39;</span><span class="p">,</span> <span class="s1">&#39;AM&#39;</span><span class="p">,</span> <span class="s1">&#39;FMPM&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT1&#39;</span><span class="p">,</span>
                                   <span class="s1">&#39;EXT2&#39;</span><span class="p">,</span> <span class="s1">&#39;LF1B&#39;</span><span class="p">,</span> <span class="s1">&#39;LF2B&#39;</span><span class="p">,</span> <span class="s1">&#39;AMB&#39;</span><span class="p">,</span> <span class="s1">&#39;NOISB&#39;</span><span class="p">,</span> <span class="s1">&#39;FMPMB&#39;</span><span class="p">,</span>
                                   <span class="s1">&#39;LF1A&#39;</span><span class="p">,</span> <span class="s1">&#39;LF2A&#39;</span><span class="p">,</span> <span class="s1">&#39;NOISA&#39;</span><span class="p">,</span> <span class="s1">&#39;FMPMA&#39;</span><span class="p">,</span> <span class="s1">&#39;AMA&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;source&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Source&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s1">&#39;:SOUR </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">:SOUR?&#39;</span><span class="p">,</span>
                               <span class="n">vals</span><span class="o">=</span><span class="n">source_val</span><span class="p">,</span>
                               <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                               Determines the LF signal to be synchronized, when monitoring is</span>
<span class="s2">                               enabled. Values are:</span>
<span class="s2">                               &#39;LF1&#39;, &#39;LF2&#39;, &#39;LF1A&#39;, &#39;LF2A&#39;, &#39;LF1B&#39;, &#39;LF2B&#39;</span>
<span class="s2">                               --&gt; Selects an internally generated LF signal.</span>
<span class="s2">                               &#39;NOISE&#39;, &#39;NOISA&#39;, &#39;NOISB&#39;</span>
<span class="s2">                               --&gt; Selects an internally generated noise signal.</span>
<span class="s2">                               &#39;EXT1&#39;, &#39;EXT2&#39;</span>
<span class="s2">                               --&gt; Selects an externally supplied LF signal.</span>
<span class="s2">                               &#39;AM&#39;, &#39;AMA&#39;, &#39;AMB&#39;</span>
<span class="s2">                               --&gt; Selects the AM signal.</span>
<span class="s2">                               &#39;FMPM&#39;, &#39;FMPMA&#39;, &#39;FMPMB&#39;</span>
<span class="s2">                               --&gt; Selects the signal also used by the frequency or phase modulations.</span>
<span class="s2">                               &quot;&quot;&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="s1">&#39;SMW-XXX&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span><span class="p">:</span> <span class="c1">#TODO: welche Option wird hierfür benötigt?</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;source_path&#39;</span><span class="p">,</span>
                                   <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Path of the LF output source&#39;</span><span class="p">,</span>
                                   <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">:SOUR&#39;</span> <span class="o">+</span> <span class="s1">&#39;:PATH </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                                   <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">:SOUR:PATH?&#39;</span><span class="p">,</span>
                                   <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;voltage&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Output voltage of the LF output&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s1">&#39;:VOLT </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">:VOLT?&#39;</span><span class="p">,</span>
                               <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                               <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;V&#39;</span><span class="p">,</span>
                               <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Output voltage of the LF output. The valid&quot;</span>
                                         <span class="s2">&quot; range will be dynamic as shown in the datasheet.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1"># With other channel numbers the device said: no hardware</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;period&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Period&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">:PER?&#39;</span><span class="p">,</span>
                               <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                               <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">,</span>
                               <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;(ReadOnly) Queries the repetition frequency of the&quot;</span>
                                         <span class="s2">&quot; sine signal.&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="s1">&#39;SMW-K24&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
                <span class="n">maxfreq</span> <span class="o">=</span> <span class="mf">20e9</span> <span class="c1"># TODO: this value will not fit, but I could not find a better one</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">maxfreq</span> <span class="o">=</span> <span class="mf">1e9</span> <span class="c1"># Information of the device</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;frequency&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Frequency&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s1">&#39;:FREQ </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lfchan</span><span class="si">}</span><span class="s1">:FREQ?&#39;</span><span class="p">,</span>
                               <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                               <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">maxfreq</span><span class="p">),</span>
                               <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;Hz&#39;</span><span class="p">,</span>
                               <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;The Frequency of the LF signal when the mode() is `FIX&#39;.&quot;</span>
                                         <span class="s2">&quot; Valid range is from 0.1Hz and ends depending on the&quot;</span>
                                         <span class="s2">&quot; installed options.&quot;</span><span class="p">)</span>
            <span class="c1"># The frequency parameter is only readable for lfchan==1 even if the channel</span>
            <span class="c1"># number is given in the communication string.</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;freq_manual&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Manual frequency set&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setfreqvalue</span><span class="p">),</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO:FREQ:MAN?&#39;</span><span class="p">,</span>
                               <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                               <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;Hz&#39;</span><span class="p">,</span>
                               <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Manual frequency set only valid in the range given&quot;</span>
                                         <span class="s2">&quot; by the parameters freq_min and freq_max.&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;freq_min&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Set minimum for manual frequency&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setfreqmin</span><span class="p">),</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO:FREQ:STAR?&#39;</span><span class="p">,</span>
                               <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                               <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">1e6</span><span class="p">),</span>
                               <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;Hz&#39;</span><span class="p">,</span>
                               <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set minimum for manual frequency from 0.1Hz to 1MHz.&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;freq_max&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Set maximum for manual frequency&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setfreqmax</span><span class="p">),</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO:FREQ:STOP?&#39;</span><span class="p">,</span>
                               <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                               <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">1e6</span><span class="p">),</span>
                               <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;Hz&#39;</span><span class="p">,</span>
                               <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set maximum for manual frequency from 0.1Hz to 1MHz.&quot;</span><span class="p">)</span>

            <span class="n">lfmode</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;CW&#39;</span><span class="p">,</span> <span class="s1">&#39;FIX&#39;</span><span class="p">,</span> <span class="s1">&#39;SWE&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span>
                               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Mode&#39;</span><span class="p">,</span>
                               <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO:FREQ:&#39;</span> <span class="o">+</span> <span class="s1">&#39;MODE </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                               <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO:FREQ:MODE?&#39;</span><span class="p">,</span>
                               <span class="n">vals</span><span class="o">=</span><span class="n">lfmode</span><span class="p">,</span>
                               <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                               Set the used mode:</span>
<span class="s2">                               &#39;FIX&#39; = fixed frequency mode (&#39;CW&#39; is a synonym)</span>
<span class="s2">                               &#39;SWE&#39; = set sweep mode (use LFOutputSweep class)</span>
<span class="s2">                               &quot;&quot;&quot;</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="nf">_setfreqmin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Helper function to set the minimum frequency and store it in a local variable</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">freqmin</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO:FREQ:STAR </span><span class="si">{</span><span class="n">val</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setfreqmax</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Helper function to set the maximum frequency and store it in a local variable</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">freqmax</span> <span class="o">=</span> <span class="n">val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO:FREQ:STOP </span><span class="si">{</span><span class="n">val</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setfreqvalue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Helper function to set the manual frequency and checks it against the</span>
<span class="sd">        local variables before</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">val</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">freqmin</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">freqmax</span> <span class="o">&lt;</span> <span class="n">val</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">val</span><span class="p">)</span><span class="si">}</span><span class="s1"> is invalid: must be between </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">freqmin</span><span class="si">}</span><span class="s1"> and &#39;</span>
                             <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">freqmax</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:LFO:FREQ:MAN </span><span class="si">{</span><span class="n">val</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span></div>



<div class="viewcode-block" id="OutputLevelSweep">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.OutputLevelSweep">[docs]</a>
<span class="k">class</span> <span class="nc">OutputLevelSweep</span><span class="p">(</span><span class="n">InstrumentChannel</span><span class="p">):</span>

<div class="viewcode-block" id="OutputLevelSweep.__init__">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.OutputLevelSweep.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="s1">&#39;RohdeSchwarz_SMW200A&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">hwchan</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Combines all the parameters concerning one RF output level (power) sweeping.</span>

<span class="sd">        Args:</span>
<span class="sd">            parent: the parent instrument of this channel</span>
<span class="sd">            name  : the internal QCoDeS name of this channel</span>
<span class="sd">            hwchan: the internal number of the hardware channel used in the communication</span>

<span class="sd">        Attributes:</span>
<span class="sd">            attenuator: Power attenuator mode for level sweep. Values are:</span>
<span class="sd">                &#39;NORM&#39;: Performs the level settings in the range of the built-in attenuator.</span>
<span class="sd">                &#39;HPOW&#39;: Performs the level settings in the high level range.</span>
<span class="sd">            dwell: Dwell time for level sweep, valid range is from 0.001s to 100s.</span>
<span class="sd">            mode: Cycle mode for level sweep. Values are:</span>
<span class="sd">                &#39;AUTO&#39;: Each trigger triggers exactly one complete sweep.</span>
<span class="sd">                &#39;MAN&#39;:  You can trigger every step individually with a command.</span>
<span class="sd">                &#39;STEP&#39;: Each trigger triggers one sweep step only.</span>
<span class="sd">            points: Steps within level sweep range, minimum is 2.</span>
<span class="sd">            log_step: Logarithmically determined step size for the RF level sweep,</span>
<span class="sd">                valid range is 0.01dB to 139dB.</span>
<span class="sd">            shape: Waveform shape for sweep. Valid are &#39;SAWTOOTH&#39; and &#39;TRIANGLE&#39;.</span>
<span class="sd">            execute: Executes one RF level sweep. Use no braces () here!</span>
<span class="sd">            retrace: Activates that the signal changes to the start frequency value while it is</span>
<span class="sd">                waiting for the next trigger event. Values are &#39;ON&#39; and &#39;OFF&#39;. You can enable this</span>
<span class="sd">                feature, when you are working with sawtooth shapes in sweep mode &#39;MAN&#39; or &#39;STEP&#39;.</span>
<span class="sd">            running: (ReadOnly) Get the current sweep state. Return values are &#39;ON&#39; or &#39;OFF&#39;.</span>
<span class="sd">            reset: Resets all active sweeps to the starting point. Use no braces () here!</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span> <span class="o">=</span> <span class="n">hwchan</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;attenuator&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Power attenuator mode for level sweep&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:POW:&#39;</span> <span class="o">+</span> <span class="s1">&#39;AMOD </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:POW:AMOD?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;NORM&#39;</span><span class="p">,</span> <span class="s1">&#39;HPOW&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                           Power attenuator mode for level sweep. Values are:</span>
<span class="s2">                           &#39;NORM&#39; = Performs the level settings in the range of the built-in</span>
<span class="s2">                                    attenuator.</span>
<span class="s2">                           &#39;HPOW&#39; = Performs the level settings in the high level range.</span>
<span class="s2">                           &quot;&quot;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;dwell&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Dwell time for level sweep&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:POW:&#39;</span> <span class="o">+</span> <span class="s1">&#39;DWEL </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:POW:DWEL?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mf">0.001</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Dwell time for level sweep, valid range is from 0.001s&quot;</span>
                                     <span class="s2">&quot; to 100s.&quot;</span><span class="p">)</span>

        <span class="n">sweepmode</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;AUTO&#39;</span><span class="p">,</span> <span class="s1">&#39;MAN&#39;</span><span class="p">,</span> <span class="s1">&#39;STEP&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Cycle mode for level sweep&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:POW:&#39;</span> <span class="o">+</span> <span class="s1">&#39;MODE </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:POW:MODE?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">sweepmode</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                           Cycle mode for level sweep. Values are:</span>
<span class="s2">                           &#39;AUTO&#39; = Each trigger triggers exactly one complete sweep.</span>
<span class="s2">                           &#39;MAN&#39;  = You can trigger every step individually with a command.</span>
<span class="s2">                           &#39;STEP&#39; = Each trigger triggers one sweep step only.</span>
<span class="s2">                           &quot;&quot;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;points&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Steps within level sweep range&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:POW:&#39;</span> <span class="o">+</span> <span class="s1">&#39;POIN </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:POW:POIN?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>  <span class="c1"># Upperlimit=MAXINT</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Steps within level sweep range, minimum is 2.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;log_step&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;logarithmically determined step size for the RF level sweep&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:POW:&#39;</span> <span class="o">+</span> <span class="s1">&#39;STEP </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:POW:STEP?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="mi">139</span><span class="p">),</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;dB&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Logarithmically determined step size for the RF level&quot;</span>
                                     <span class="s2">&quot; sweep, valid range is 0.01dB to 139dB.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;shape&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Waveform shape for sweep&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:POW:&#39;</span> <span class="o">+</span> <span class="s1">&#39;SHAP </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:POW:SHAP?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;SAWTOOTH&#39;</span><span class="p">,</span> <span class="s1">&#39;TRIANGLE&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Waveform shape for sweep. Valid are &#39;SAWTOOTH&#39; and&quot;</span>
                                     <span class="s2">&quot; &#39;TRIANGLE&#39;.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_function</span><span class="p">(</span><span class="s1">&#39;execute&#39;</span><span class="p">,</span>
                           <span class="n">call_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:POW:EXEC&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Executes one RF level sweep. Use no braces () here!&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;retrace&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Set to start frequency while waiting for trigger  &#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:POW:&#39;</span> <span class="o">+</span> <span class="s1">&#39;RETR </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:POW:RETR?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;ON&#39;</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Activates that the signal changes to the start frequency&quot;</span>
                                     <span class="s2">&quot; value while it is waiting for the next trigger event.&quot;</span>
                                     <span class="s2">&quot; Values are &#39;ON&#39; and &#39;OFF&#39;. You can enable this feature,&quot;</span>
                                     <span class="s2">&quot; when you are working with sawtooth shapes in sweep mode&quot;</span>
                                     <span class="s2">&quot; &#39;MAN&#39; or &#39;STEP&#39;.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;running&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Current sweep state&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:POW:RUNN?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;ON&#39;</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;(ReadOnly) Get the current sweep state. Return&quot;</span>
                                     <span class="s2">&quot; values are &#39;ON&#39; or &#39;OFF&#39;.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_function</span><span class="p">(</span><span class="s1">&#39;reset&#39;</span><span class="p">,</span>
                           <span class="n">call_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:RES&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Resets all active sweeps to the starting point.&quot;</span>
                                     <span class="s2">&quot; Use no braces () here!&quot;</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="OutputFrequencySweep">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.OutputFrequencySweep">[docs]</a>
<span class="k">class</span> <span class="nc">OutputFrequencySweep</span><span class="p">(</span><span class="n">InstrumentChannel</span><span class="p">):</span>

<div class="viewcode-block" id="OutputFrequencySweep.__init__">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.OutputFrequencySweep.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="s1">&#39;RohdeSchwarz_SMW200A&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">hwchan</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Combines all the parameters concerning one RF output frequency sweeping.</span>

<span class="sd">        Args:</span>
<span class="sd">            parent: the parent instrument of this channel</span>
<span class="sd">            name  : the internal QCoDeS name of this channel</span>
<span class="sd">            hwchan: the internal number of the hardware channel used in the communication</span>

<span class="sd">        Attributes:</span>
<span class="sd">            dwell: Dwell time for frequency sweep. Valid range from 0.001s to 100s.</span>
<span class="sd">            mode: Cycle mode for frequency sweep. Values are:</span>
<span class="sd">                &#39;AUTO&#39;: Each trigger triggers exactly one complete sweep.</span>
<span class="sd">                &#39;MAN&#39;:  You can trigger every step individually with a command.</span>
<span class="sd">                &#39;STEP&#39;: Each trigger triggers one sweep step only.</span>
<span class="sd">            points: Steps within frequency sweep range, minimum is 2.</span>
<span class="sd">            spacing: Calculationmode of frequency intervals. Values are &#39;LIN&#39; or &#39;LOG&#39;.</span>
<span class="sd">            shape: Waveform shape for sweep. Valid values are &#39;SAWTOOTH&#39; or &#39;TRIANGLE&#39;.</span>
<span class="sd">            execute: Executes one RF frequency sweep. Use no braces () here!</span>
<span class="sd">            retrace: Activates that the signal changes to the start frequency value while it is</span>
<span class="sd">                waiting for the next trigger event. Values are &#39;ON&#39; and &#39;OFF&#39;. You can enable this</span>
<span class="sd">                feature, when you are working with sawtooth shapes in sweep mode &#39;MAN&#39; or &#39;STEP&#39;.</span>
<span class="sd">            running: (ReadOnly) Get the current sweep state. Return values are &#39;ON&#39; or &#39;OFF&#39;.</span>
<span class="sd">            log_step: Logarithmically determined step size for the RF frequency sweep.</span>
<span class="sd">                Valid range is 0.01 to 100.</span>
<span class="sd">            lin_step: Step size for linear RF frequency sweep. The minimum is 0.01</span>
<span class="sd">                and the maximum is the sweep_span of the output channel and will</span>
<span class="sd">                be read during the set lin_step command.</span>
<span class="sd">            reset: Resets all active sweeps to the starting point. Use no braces () here!</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span> <span class="o">=</span> <span class="n">hwchan</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;dwell&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Dwell time for frequency sweep&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:&#39;</span> <span class="o">+</span> <span class="s1">&#39;DWEL </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:DWEL?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mf">0.001</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Dwell time for frequency sweep. Valid range from 0.001s&quot;</span>
                                     <span class="s2">&quot; to 100s.&quot;</span><span class="p">)</span>

        <span class="n">sweepmode</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;AUTO&#39;</span><span class="p">,</span> <span class="s1">&#39;MAN&#39;</span><span class="p">,</span> <span class="s1">&#39;STEP&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Cycle mode for frequency sweep&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:&#39;</span> <span class="o">+</span> <span class="s1">&#39;MODE </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:MODE?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">sweepmode</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                           Cycle mode for frequency sweep. Values are:</span>
<span class="s2">                           &#39;AUTO&#39; = Each trigger triggers exactly one complete sweep.</span>
<span class="s2">                           &#39;MAN&#39;  = You can trigger every step individually with a command.</span>
<span class="s2">                           &#39;STEP&#39; = Each trigger triggers one sweep step only.</span>
<span class="s2">                           &quot;&quot;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;points&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Steps within frequency sweep range&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:&#39;</span> <span class="o">+</span> <span class="s1">&#39;POIN </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:POIN?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>  <span class="c1"># Upperlimit=MAXINT</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Steps within frequency sweep range, minimum is 2.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;spacing&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;calculationmode of frequency intervals&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:&#39;</span> <span class="o">+</span> <span class="s1">&#39;SPAC </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:SPAC?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;LIN&#39;</span><span class="p">,</span> <span class="s1">&#39;LOG&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Calculationmode of frequency intervals. Values are &#39;LIN&#39;&quot;</span>
                                     <span class="s2">&quot; or &#39;LOG&#39;.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;shape&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Waveform shape for sweep&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:&#39;</span> <span class="o">+</span> <span class="s1">&#39;SHAP </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:SHAP?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;SAWTOOTH&#39;</span><span class="p">,</span> <span class="s1">&#39;TRIANGLE&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Waveform shape for sweep. Valid values are &#39;SAWTOOTH&#39; or&quot;</span>
                                     <span class="s2">&quot; &#39;TRIANGLE&#39;.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_function</span><span class="p">(</span><span class="s1">&#39;execute&#39;</span><span class="p">,</span>
                           <span class="n">call_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:EXEC&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Executes one RF frequency sweep. Use no braces () here!&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;retrace&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Set to start frequency while waiting for trigger  &#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:&#39;</span> <span class="o">+</span> <span class="s1">&#39;RETR </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:RETR?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;ON&#39;</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Activates that the signal changes to the start frequency&quot;</span>
                                     <span class="s2">&quot; value while it is waiting for the next trigger event.&quot;</span>
                                     <span class="s2">&quot; when you are working Values are &#39;ON&#39; and &#39;OFF&#39;. You can&quot;</span>
                                     <span class="s2">&quot; enable this feature, with sawtooth shapes in sweep mode&quot;</span>
                                     <span class="s2">&quot; &#39;MAN&#39; or &#39;STEP&#39;.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;running&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Current sweep state&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:RUNN?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;ON&#39;</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;(ReadOnly) Get the current sweep state. Return&quot;</span>
                                     <span class="s2">&quot; values are &#39;ON&#39; or &#39;OFF&#39;.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;log_step&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;logarithmically determined step size for the RF freq sweep&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:STEP:&#39;</span> <span class="o">+</span> <span class="s1">&#39;LOG </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:STEP:LOG?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;%&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Logarithmically determined step size for the RF&quot;</span>
                                     <span class="s2">&quot; frequency sweep. Valid range is 0.01 to 100.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;lin_step&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;step size for linear RF freq sweep&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setlinstep</span><span class="p">),</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:STEP?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mf">0.01</span><span class="p">),</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;Hz&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Step size for linear RF frequency sweep. The&quot;</span>
                                     <span class="s2">&quot; minimum is 0.01 and the maximum is the sweep_span&quot;</span>
                                     <span class="s2">&quot; of the output channel and will be read during the&quot;</span>
                                     <span class="s2">&quot; set lin_step command.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_function</span><span class="p">(</span><span class="s1">&#39;reset&#39;</span><span class="p">,</span>
                           <span class="n">call_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:RES&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Resets all active sweeps to the starting point.&quot;</span>
                                     <span class="s2">&quot; Use no braces () here!&quot;</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="nf">_setlinstep</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Helper function to check the maximum allowed value for the step</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">maxfreq</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:FREQ:SPAN?&#39;</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">val</span> <span class="o">&gt;</span> <span class="n">maxfreq</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">val</span><span class="p">)</span><span class="si">}</span><span class="s1"> is invalid: must be between 0.01 and </span><span class="si">{</span><span class="n">maxfreq</span><span class="si">}</span><span class="s1"> &#39;</span>
                             <span class="sa">f</span><span class="s1">&#39;inclusive.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hwchan</span><span class="si">}</span><span class="s1">:SWE:STEP </span><span class="si">{</span><span class="n">val</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span></div>



<div class="viewcode-block" id="OutputChannel">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.OutputChannel">[docs]</a>
<span class="k">class</span> <span class="nc">OutputChannel</span><span class="p">(</span><span class="n">InstrumentChannel</span><span class="p">):</span>
    <span class="n">_MAXFREQ_POOL</span> <span class="o">=</span> <span class="p">{</span>
        <span class="mi">1</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;SMW-B120&#39;</span><span class="p">:</span> <span class="mf">20e9</span><span class="p">,</span>
            <span class="s1">&#39;SMW-B103&#39;</span><span class="p">:</span> <span class="mf">3e9</span><span class="p">,</span>
            <span class="s1">&#39;SMW-B106&#39;</span><span class="p">:</span> <span class="mf">6e9</span><span class="p">,</span>
            <span class="s1">&#39;SMW-B112&#39;</span><span class="p">:</span> <span class="mf">12.75e9</span><span class="p">,</span>
            <span class="s1">&#39;SMW-B131&#39;</span><span class="p">:</span> <span class="mf">31.8e9</span><span class="p">,</span>
            <span class="s1">&#39;SMW-B140&#39;</span><span class="p">:</span> <span class="mf">40e9</span>
        <span class="p">},</span>
        <span class="mi">2</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;SMW-B203&#39;</span><span class="p">:</span> <span class="mf">3e9</span><span class="p">,</span>
            <span class="s1">&#39;SMW-B206&#39;</span><span class="p">:</span> <span class="mf">6e9</span><span class="p">,</span>
            <span class="s1">&#39;SMW-B207&#39;</span><span class="p">:</span> <span class="mf">7.5e9</span><span class="p">,</span>
            <span class="s1">&#39;SMW-B212&#39;</span><span class="p">:</span> <span class="mf">12.75e9</span><span class="p">,</span>
            <span class="s1">&#39;SMW-220&#39;</span><span class="p">:</span> <span class="mf">20e9</span>
        <span class="p">}</span>
    <span class="p">}</span>

<div class="viewcode-block" id="OutputChannel.__init__">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.OutputChannel.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="s1">&#39;RohdeSchwarz_SMW200A&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">chnum</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Combines all the parameters concerning one RF output.</span>

<span class="sd">        Args:</span>
<span class="sd">            parent: the parent instrument of this channel</span>
<span class="sd">            name  : the internal QCoDeS name of this channel</span>
<span class="sd">            chnum : the internal number of the channel used in the communication</span>

<span class="sd">        Attributes:</span>
<span class="sd">            state: actives/deactivates the RF output. Values are &#39;ON&#39; and &#39;OFF&#39;.</span>
<span class="sd">            frequency: set/read the main frequency of the oscillator.</span>
<span class="sd">            level: set/read the output power level.</span>
<span class="sd">            mode: selects the mode of the oscillator. Valid values are:</span>
<span class="sd">                &#39;FIX&#39;: fixed frequency mode (CW is a synonym)</span>
<span class="sd">                &#39;SWE&#39;: set sweep mode (use sweep_start/sweep_stop/sweep_center/sweep_span)</span>
<span class="sd">                &#39;LIST&#39;: use a special loadable list of frequencies - the list functions</span>
<span class="sd">                are not yet implemented here.</span>
<span class="sd">            sweep_center: set/read the center frequency of the sweep.</span>
<span class="sd">            sweep_span: set/read the span of frequency sweep range.</span>
<span class="sd">            sweep_start: set/read the start frequency of the sweep.</span>
<span class="sd">            sweep_stop: set/read the stop frequency of the sweep.</span>
<span class="sd">            losc_input: read the LOscillator input frequency (ReadOnly).</span>
<span class="sd">            losc_mode: set/read the LOscillator mode. Valid values are:</span>

<span class="sd">                - &#39;INT&#39;: A&amp;B Internal / Internal (one path instrument). Uses the internal oscillator</span>
<span class="sd">                  signal in both paths.</span>
<span class="sd">                - &#39;EXT&#39;: A External &amp; B Internal (one path instrument). Uses an external signal in</span>
<span class="sd">                  path A. B uses its internal signal.</span>
<span class="sd">                - &#39;COUP&#39;: A Internal &amp; A-&gt;B Coupled. Assigns the internal oscillator signal of path A</span>
<span class="sd">                  also to path B.</span>
<span class="sd">                - &#39;ECO&#39;: A External &amp; A-&gt;B Coupled. Assigns an externally supplied signal to both</span>
<span class="sd">                  paths.</span>
<span class="sd">                - &#39;BOFF&#39;: A Internal &amp; B RF Off. Uses the internal local oscillator signal of path A,</span>
<span class="sd">                  if the selected frequency exceeds the maximum frequency of path B.</span>
<span class="sd">                - &#39;EBOF&#39;: A External &amp; B RF Off. Uses the LO IN signal for path A, if the selected</span>
<span class="sd">                  RF frequency exceeds the maximum frequency of path B.</span>
<span class="sd">                - &#39;AOFF&#39;: A RF Off &amp; B External. Uses the LO IN signal for path B, if the selected</span>
<span class="sd">                  RF frequency exceeds the maximum frequency of path A.</span>

<span class="sd">            losc_output: read the LOscillator output frequency (ReadOnly).</span>
<span class="sd">            losc_state: set/read the LOscillator state. Valid values are &#39;ON&#39; and &#39;OFF&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">chnum</span> <span class="o">=</span> <span class="n">chnum</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chnum</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_MAXFREQ_POOL</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">opt</span><span class="p">,</span> <span class="n">freq</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_MAXFREQ_POOL</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">opt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
                    <span class="n">maxfreq</span> <span class="o">=</span> <span class="n">freq</span>
                    <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Missing frequency option for RF path </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;frequency&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Frequency&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s1">&#39;:FREQ </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:FREQ?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mf">100e3</span><span class="p">,</span> <span class="n">maxfreq</span><span class="p">),</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;Hz&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;The main frequency of the oscillator.&quot;</span>
                                     <span class="s2">&quot; The minimum is 100kHz and the maximum&quot;</span>
                                     <span class="s2">&quot; depends on the installed option.&quot;</span><span class="p">)</span>

        <span class="c1"># TODO: are these parameter meaningfull?</span>
        <span class="c1"># &#39;offset&#39; This value represents the frequency shift of a downstream</span>
        <span class="c1">#          instrument, like for example a mixer.</span>
        <span class="c1"># &#39;multiplier&#39;: This value represents the multiplication factor of a</span>
        <span class="c1">#          downstream instrument, like for example a multiplier.</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;level&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Level&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;POW:POW </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:POW:POW?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="o">-</span><span class="mi">145</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;dBm&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;The output power level. Valid values are&quot;</span>
                                     <span class="s2">&quot; from -145dBm up to 30dBm.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;State&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;OUTP</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="s1">&#39;STAT </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;OUTP</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:STAT?&#39;</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ON&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;ON&#39;</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;actives/deactivates the RF output. Values are &#39;ON&#39; and &#39;OFF&#39;&quot;</span><span class="p">)</span>

        <span class="n">rfmode</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;CW&#39;</span><span class="p">,</span> <span class="s1">&#39;FIX&#39;</span><span class="p">,</span> <span class="s1">&#39;SWE&#39;</span><span class="p">,</span> <span class="s1">&#39;LIST&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Mode&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:FREQ:&#39;</span> <span class="o">+</span> <span class="s1">&#39;MODE </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:FREQ:MODE?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">rfmode</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                           Selects the mode of the oscillator. Valid values are:</span>
<span class="s2">                           &#39;FIX&#39;  = fixed frequency mode (CW is a synonym)</span>
<span class="s2">                           &#39;SWE&#39;  = set sweep mode (use start/stop/center/span)</span>
<span class="s2">                           &#39;LIST&#39; = use a special loadable list of frequencies (nyi here)</span>
<span class="s2">                           &quot;&quot;&quot;</span><span class="p">)</span>

        <span class="c1"># Parameter for the sweep mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;sweep_center&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Center frequency of the sweep&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:FREQ:&#39;</span> <span class="o">+</span> <span class="s1">&#39;CENT </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:FREQ:CENT?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mf">300e3</span><span class="p">,</span> <span class="n">maxfreq</span><span class="p">),</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;Hz&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                           The center frequency of the sweep.</span>
<span class="s2">                           Use sweep_center and sweep_span or</span>
<span class="s2">                           use sweep_start and sweep_stop</span>
<span class="s2">                           to define the sweep range.</span>
<span class="s2">                           &quot;&quot;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;sweep_span&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Span of frequency sweep range&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:FREQ:&#39;</span> <span class="o">+</span> <span class="s1">&#39;SPAN </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:FREQ:SPAN?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">maxfreq</span><span class="p">),</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;Hz&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                           The span of frequency sweep range.</span>
<span class="s2">                           Use sweep_center and sweep_span or</span>
<span class="s2">                           use sweep_start and sweep_stop</span>
<span class="s2">                           to define the sweep range.</span>
<span class="s2">                           &quot;&quot;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;sweep_start&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Start frequency of the sweep&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:FREQ:&#39;</span> <span class="o">+</span> <span class="s1">&#39;STAR </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:FREQ:STAR?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mf">300e3</span><span class="p">,</span> <span class="n">maxfreq</span><span class="p">),</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;Hz&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                           The start frequency of the sweep.</span>
<span class="s2">                           Use sweep_start and sweep_stop or</span>
<span class="s2">                           use sweep_center and sweep_span</span>
<span class="s2">                           to define the sweep range.</span>
<span class="s2">                           &quot;&quot;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;sweep_stop&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Stop frequency of the sweep&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:FREQ:&#39;</span> <span class="o">+</span> <span class="s1">&#39;STOP </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:FREQ:STOP?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Numbers</span><span class="p">(</span><span class="mf">300e3</span><span class="p">,</span> <span class="n">maxfreq</span><span class="p">),</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;Hz&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                           The stop frequency of the sweep.</span>
<span class="s2">                           Use sweep_start and sweep_stop or</span>
<span class="s2">                           use sweep_center and sweep_span</span>
<span class="s2">                           to define the sweep range.</span>
<span class="s2">                           &quot;&quot;&quot;</span><span class="p">)</span>

        <span class="c1"># Parameter for the LOSCILLATOR</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;losc_input&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;LOscillator input frequency&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:FREQ:LOSC:INP:FREQ?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;Hz&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;(ReadOnly) Read the LOscillator input frequency.&quot;</span><span class="p">)</span>

        <span class="n">lomode</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;INT&#39;</span><span class="p">,</span> <span class="s1">&#39;EXT&#39;</span><span class="p">,</span> <span class="s1">&#39;COUP&#39;</span><span class="p">,</span> <span class="s1">&#39;ECO&#39;</span><span class="p">,</span> <span class="s1">&#39;BOFF&#39;</span><span class="p">,</span> <span class="s1">&#39;EBOF&#39;</span><span class="p">,</span> <span class="s1">&#39;AOFF&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;losc_mode&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;LOscillator mode&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:FREQ:LOSC:&#39;</span> <span class="o">+</span> <span class="s1">&#39;MODE </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:FREQ:LOSC:MODE?&#39;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">lomode</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                           The LOscillator mode. Valid options:</span>
<span class="s2">                               &#39;INT&#39;:  A&amp;B Internal / Internal (one path instrument) - Uses the</span>
<span class="s2">                                       internal oscillator signal in both paths.</span>
<span class="s2">                               &#39;EXT&#39;:  A External &amp; B Internal (one path instrument) - Uses an</span>
<span class="s2">                                       external signal in path A. B uses its internal signal.</span>
<span class="s2">                               &#39;COUP&#39;: A Internal &amp; A-&gt;B Coupled - Assigns the internal oscillator</span>
<span class="s2">                                       signal of path A also to path B.</span>
<span class="s2">                               &#39;ECO&#39;:  A External &amp; A-&gt;B Coupled - Assigns an externally supplied</span>
<span class="s2">                                       signal to both paths.</span>
<span class="s2">                               &#39;BOFF&#39;: A Internal &amp; B RF Off - Uses the internal local oscillator</span>
<span class="s2">                                       signal of path A, if the selected frequency exceeds the</span>
<span class="s2">                                       maximum frequency of path B.</span>
<span class="s2">                               &#39;EBOF&#39;: A External &amp; B RF Off - Uses the LO IN signal for path A, if</span>
<span class="s2">                                       the selected RF frequency exceeds the maximum frequency of</span>
<span class="s2">                                       path B.</span>
<span class="s2">                               &#39;AOFF&#39;: A RF Off &amp; B External - Uses the LO IN signal for path B, if</span>
<span class="s2">                                       the selected RF frequency exceeds the maximum frequency of</span>
<span class="s2">                                       path A.</span>
<span class="s2">                           &quot;&quot;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;losc_output&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;LOscillator output frequency&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:FREQ:LOSC:OUTP:FREQ?&#39;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;Hz&#39;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;(ReadOnly) Read the LOscillator output frequency.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;losc_state&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;LOscillator state&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:FREQ:LOSC:OUTP:&#39;</span> <span class="o">+</span> <span class="s1">&#39;STAT </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chnum</span><span class="si">}</span><span class="s1">:FREQ:LOSC:OUTP:STAT?&#39;</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ON&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;ON&#39;</span><span class="p">,</span> <span class="s1">&#39;OFF&#39;</span><span class="p">),</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set the LOscillator state. Valid values are &#39;ON&#39; and &#39;OFF&#39;.&quot;</span><span class="p">)</span></div>
</div>




<div class="viewcode-block" id="RohdeSchwarz_SMW200A">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.RohdeSchwarz_SMW200A">[docs]</a>
<span class="k">class</span> <span class="nc">RohdeSchwarz_SMW200A</span><span class="p">(</span><span class="n">VisaInstrument</span><span class="p">):</span>
<span class="c1">#class RohdeSchwarz_SMW200A(MockVisa):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This is the qcodes driver for the Rohde &amp; Schwarz SMW200A vector signal</span>
<span class="sd">    generator.</span>
<span class="sd">    </span>
<span class="sd">    Do not forget to change the class for real / simulation mode.</span>

<span class="sd">    Status:</span>
<span class="sd">        coding: almost finished</span>
<span class="sd">        communication tests: done</span>
<span class="sd">        usage in experiment: outstanding</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c1"># for security check the ID from the device</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">idn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s2">&quot;*IDN?&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">idn</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;Rohde&amp;Schwarz,SMW200A,&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Invalid device ID found: &quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">idn</span><span class="p">)</span>

        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39; : Initializing instrument &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">idn</span><span class="p">)</span>

        <span class="c1"># save the option flags as a string array for later usage</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s2">&quot;*OPT?&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;options&#39;</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Options&#39;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_options</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;(ReadOnly) List of installed options.&quot;</span><span class="p">)</span>

        <span class="c1"># RF output submodules</span>
        <span class="n">rfchannels</span> <span class="o">=</span> <span class="n">ChannelList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;OutputChannels&quot;</span><span class="p">,</span> <span class="n">OutputChannel</span><span class="p">,</span>
                                 <span class="n">snapshotable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;SMW-B203&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span> <span class="ow">or</span> <span class="s1">&#39;SMW-B206&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span> \
                <span class="ow">or</span> <span class="s1">&#39;SMW-B207&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span> <span class="ow">or</span> <span class="s1">&#39;SMW-B212&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span> \
                <span class="ow">or</span> <span class="s1">&#39;SMW-B220&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rfoutput_no</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rfoutput_no</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">chnum</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rfoutput_no</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;rfoutput</span><span class="si">{</span><span class="n">chnum</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="n">rfchannel</span> <span class="o">=</span> <span class="n">OutputChannel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">chnum</span><span class="p">)</span>
            <span class="n">rfchannels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rfchannel</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_submodule</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">rfchannel</span><span class="p">)</span>
        <span class="n">rfchannels</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_submodule</span><span class="p">(</span><span class="s1">&#39;output_channels&#39;</span><span class="p">,</span> <span class="n">rfchannels</span><span class="p">)</span>

        <span class="c1"># RF output sweep submodules (for Level and Frequency)</span>
        <span class="n">rflevelsweeps</span> <span class="o">=</span> <span class="n">ChannelList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;OutputLevelSweep&quot;</span><span class="p">,</span> <span class="n">OutputLevelSweep</span><span class="p">,</span>
                                    <span class="n">snapshotable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">rfnum</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rfoutput_no</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;level_sweep</span><span class="si">{</span><span class="n">rfnum</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="n">rfsweep</span> <span class="o">=</span> <span class="n">OutputLevelSweep</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">rfnum</span><span class="p">)</span>
            <span class="n">rflevelsweeps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rfsweep</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_submodule</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">rfsweep</span><span class="p">)</span>
        <span class="n">rflevelsweeps</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_submodule</span><span class="p">(</span><span class="s1">&#39;rflevelsweep_channels&#39;</span><span class="p">,</span> <span class="n">rflevelsweeps</span><span class="p">)</span>

        <span class="n">rffreqsweeps</span> <span class="o">=</span> <span class="n">ChannelList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;OutputFrequencySweep&quot;</span><span class="p">,</span> <span class="n">OutputFrequencySweep</span><span class="p">,</span>
                                   <span class="n">snapshotable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">rfnum</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rfoutput_no</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;freq_sweep</span><span class="si">{</span><span class="n">rfnum</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="n">rfsweep</span> <span class="o">=</span> <span class="n">OutputFrequencySweep</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">rfnum</span><span class="p">)</span>
            <span class="n">rffreqsweeps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rfsweep</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_submodule</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">rfsweep</span><span class="p">)</span>
        <span class="n">rffreqsweeps</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_submodule</span><span class="p">(</span><span class="s1">&#39;rffreqsweep_channels&#39;</span><span class="p">,</span> <span class="n">rffreqsweeps</span><span class="p">)</span>

        <span class="c1"># LF output submodules</span>
        <span class="n">lfchannels</span> <span class="o">=</span> <span class="n">ChannelList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;LFOutputChannels&quot;</span><span class="p">,</span> <span class="n">LFOutputChannel</span><span class="p">,</span>
                                 <span class="n">snapshotable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lfoutput_no</span> <span class="o">=</span> <span class="mi">2</span> <span class="c1"># TODO: wie fragen wir das ab?</span>
        <span class="k">for</span> <span class="n">rfnum</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rfoutput_no</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">lfnum</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lfoutput_no</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;lf</span><span class="si">{</span><span class="n">rfnum</span><span class="si">}</span><span class="s1">output</span><span class="si">{</span><span class="n">lfnum</span><span class="si">}</span><span class="s1">&#39;</span>
                <span class="n">lfchannel</span> <span class="o">=</span> <span class="n">LFOutputChannel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">rfnum</span><span class="p">,</span> <span class="n">lfnum</span><span class="p">)</span>
                <span class="n">lfchannels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lfchannel</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_submodule</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">lfchannel</span><span class="p">)</span>
        <span class="n">lfchannels</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_submodule</span><span class="p">(</span><span class="s1">&#39;lfoutput_channels&#39;</span><span class="p">,</span> <span class="n">lfchannels</span><span class="p">)</span>

        <span class="c1"># LF output sweep submodules</span>
        <span class="n">lfsweeps</span> <span class="o">=</span> <span class="n">ChannelList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;LFOutputSweep&quot;</span><span class="p">,</span> <span class="n">LFOutputSweep</span><span class="p">,</span>
                               <span class="n">snapshotable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">rfnum</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rfoutput_no</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;lf</span><span class="si">{</span><span class="n">rfnum</span><span class="si">}</span><span class="s1">sweep&#39;</span>
            <span class="n">lfsweep</span> <span class="o">=</span> <span class="n">LFOutputSweep</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">rfnum</span><span class="p">)</span>
            <span class="n">lfsweeps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lfsweep</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_submodule</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">lfsweep</span><span class="p">)</span>
        <span class="n">lfsweeps</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_submodule</span><span class="p">(</span><span class="s1">&#39;lfsweep_channels&#39;</span><span class="p">,</span> <span class="n">lfsweeps</span><span class="p">)</span>

        <span class="c1">#Amplitude Modulation submodules</span>
        <span class="n">amchannels</span> <span class="o">=</span> <span class="n">ChannelList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;AMChannels&quot;</span><span class="p">,</span> <span class="n">AmplitudeModulation</span><span class="p">,</span>
                                 <span class="n">snapshotable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">am_no</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="k">for</span> <span class="n">rfnum</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rfoutput_no</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">chnum</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">am_no</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;am</span><span class="si">{</span><span class="n">rfnum</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">chnum</span><span class="si">}</span><span class="s1">&#39;</span>
                <span class="n">amchannel</span> <span class="o">=</span> <span class="n">AmplitudeModulation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">rfnum</span><span class="p">,</span> <span class="n">chnum</span><span class="p">)</span>
                <span class="n">amchannels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">amchannel</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_submodule</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">amchannel</span><span class="p">)</span>
        <span class="n">amchannels</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_submodule</span><span class="p">(</span><span class="s1">&#39;am_channels&#39;</span><span class="p">,</span> <span class="n">amchannels</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;SMW-B22&#39;</span> <span class="ow">or</span> <span class="s1">&#39;SMW-B20&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
            <span class="c1">#Frequency Modulation submodules</span>
            <span class="n">fmchannels</span> <span class="o">=</span> <span class="n">ChannelList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;FMChannels&quot;</span><span class="p">,</span> <span class="n">FrequencyModulation</span><span class="p">,</span>
                                     <span class="n">snapshotable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fm_no</span> <span class="o">=</span> <span class="mi">2</span>
            <span class="k">for</span> <span class="n">rfnum</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rfoutput_no</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">chnum</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fm_no</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;fm</span><span class="si">{</span><span class="n">rfnum</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">chnum</span><span class="si">}</span><span class="s1">&#39;</span>
                    <span class="n">fmchannel</span> <span class="o">=</span> <span class="n">FrequencyModulation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">rfnum</span><span class="p">,</span> <span class="n">chnum</span><span class="p">)</span>
                    <span class="n">fmchannels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fmchannel</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">add_submodule</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">fmchannel</span><span class="p">)</span>
            <span class="n">fmchannels</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_submodule</span><span class="p">(</span><span class="s1">&#39;fm_channels&#39;</span><span class="p">,</span> <span class="n">fmchannels</span><span class="p">)</span>

            <span class="c1">#Phase Modulation submodules</span>
            <span class="n">pmchannels</span> <span class="o">=</span> <span class="n">ChannelList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;PMChannels&quot;</span><span class="p">,</span> <span class="n">PhaseModulation</span><span class="p">,</span>
                                     <span class="n">snapshotable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pm_no</span> <span class="o">=</span> <span class="mi">2</span>
            <span class="k">for</span> <span class="n">rfnum</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rfoutput_no</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">chnum</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pm_no</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;pm</span><span class="si">{</span><span class="n">rfnum</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">chnum</span><span class="si">}</span><span class="s1">&#39;</span>
                    <span class="n">pmchannel</span> <span class="o">=</span> <span class="n">PhaseModulation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">rfnum</span><span class="p">,</span> <span class="n">chnum</span><span class="p">)</span>
                    <span class="n">pmchannels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pmchannel</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">add_submodule</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">pmchannel</span><span class="p">)</span>
            <span class="n">pmchannels</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_submodule</span><span class="p">(</span><span class="s1">&#39;pm_channels&#39;</span><span class="p">,</span> <span class="n">pmchannels</span><span class="p">)</span>

        <span class="c1">#Pulse modulation submodule</span>
        <span class="k">if</span> <span class="s1">&#39;SMW-K22&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">rfnum</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rfoutput_no</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;pulsemod</span><span class="si">{</span><span class="n">rfnum</span><span class="si">}</span><span class="s1">&#39;</span>
                <span class="n">pulsemchannel</span> <span class="o">=</span> <span class="n">PulseModulation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">rfnum</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_submodule</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">pulsemchannel</span><span class="p">)</span>

            <span class="k">if</span> <span class="s1">&#39;SMW-K23&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
                <span class="c1">#Pulse generator</span>
                <span class="n">pgenchannels</span> <span class="o">=</span> <span class="n">ChannelList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;PGenChannels&quot;</span><span class="p">,</span> <span class="n">PulseGenerator</span><span class="p">,</span>
                                           <span class="n">snapshotable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pgen_no</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="k">for</span> <span class="n">chnum</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgen_no</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;pulsegen</span><span class="si">{</span><span class="n">chnum</span><span class="si">}</span><span class="s1">&#39;</span>
                    <span class="n">pgenchannel</span> <span class="o">=</span> <span class="n">PulseGenerator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">chnum</span><span class="p">)</span>
                    <span class="n">pgenchannels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pgenchannel</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">add_submodule</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">pgenchannel</span><span class="p">)</span>
                <span class="n">pgenchannels</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_submodule</span><span class="p">(</span><span class="s1">&#39;pgen_channels&#39;</span><span class="p">,</span> <span class="n">pgenchannels</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;genTriggerPulse&#39;</span><span class="p">,</span>
                                   <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Trigger Pulse&#39;</span><span class="p">,</span>
                                   <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">genTriggerPulse</span><span class="p">,</span>
                                   <span class="n">get_cmd</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                   <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;(WriteOnly) Generates on trigger pulse.&quot;</span><span class="p">)</span>

        <span class="c1">#IQ modulation submodule</span>
        <span class="k">for</span> <span class="n">rfnum</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rfoutput_no</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;iqmod</span><span class="si">{</span><span class="n">rfnum</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="n">IQmodchannel</span> <span class="o">=</span> <span class="n">IQModulation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">rfnum</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_submodule</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">IQmodchannel</span><span class="p">)</span>

        <span class="c1">#analog IQ outputs submodule</span>
        <span class="n">iqchannels</span> <span class="o">=</span> <span class="n">ChannelList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;IQChannels&quot;</span><span class="p">,</span> <span class="n">IQChannel</span><span class="p">,</span> <span class="n">snapshotable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iqoutput_no</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="k">for</span> <span class="n">iq_num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">iqoutput_no</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;iqoutput</span><span class="si">{</span><span class="n">iq_num</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="n">iqchannel</span> <span class="o">=</span> <span class="n">IQChannel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">iq_num</span><span class="p">)</span>
            <span class="n">iqchannels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">iqchannel</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_submodule</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">iqchannel</span><span class="p">)</span>
        <span class="n">iqchannels</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_submodule</span><span class="p">(</span><span class="s1">&#39;iqoutput_channels&#39;</span><span class="p">,</span> <span class="n">iqchannels</span><span class="p">)</span>


<div class="viewcode-block" id="RohdeSchwarz_SMW200A.get_id">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.RohdeSchwarz_SMW200A.get_id">[docs]</a>
    <span class="k">def</span> <span class="nf">get_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the device identification.</span>

<span class="sd">        Args:</span>
<span class="sd">            None</span>

<span class="sd">        Returns:</span>
<span class="sd">            Strings from the IDN command from the startup.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">idn</span></div>



<div class="viewcode-block" id="RohdeSchwarz_SMW200A.get_options">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.RohdeSchwarz_SMW200A.get_options">[docs]</a>
    <span class="k">def</span> <span class="nf">get_options</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the device option flags.</span>

<span class="sd">        Args:</span>
<span class="sd">            None</span>

<span class="sd">        Returns:</span>
<span class="sd">            Stringarray with the options installed in the device</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span></div>



<div class="viewcode-block" id="RohdeSchwarz_SMW200A.close">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.RohdeSchwarz_SMW200A.close">[docs]</a>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Close the connection.</span>

<span class="sd">        Args:</span>
<span class="sd">            None</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39;: close connection&#39;</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>



<div class="viewcode-block" id="RohdeSchwarz_SMW200A.reset">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.RohdeSchwarz_SMW200A.reset">[docs]</a>
    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Resets the instrument to default values.</span>

<span class="sd">        Args:</span>
<span class="sd">            None</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39;: Resetting instrument&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;*RST&#39;</span><span class="p">)</span></div>



<div class="viewcode-block" id="RohdeSchwarz_SMW200A.get_error">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.RohdeSchwarz_SMW200A.get_error">[docs]</a>
    <span class="k">def</span> <span class="nf">get_error</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reads the errors from the device.</span>

<span class="sd">        Args:</span>
<span class="sd">            None</span>

<span class="sd">        Returns:</span>
<span class="sd">            List of strings containing error number and string representation</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">retval</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s1">&#39;SYST:ERR:ALL?&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">retval</span></div>



<div class="viewcode-block" id="RohdeSchwarz_SMW200A.gen_trigger_pulse">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.RohdeSchwarz_SMW200A.gen_trigger_pulse">[docs]</a>
    <span class="k">def</span> <span class="nf">gen_trigger_pulse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Function to generate a trigger pulse. The port for this is always defined</span>
<span class="sd">        by the user. And the Options SMW-K22 and SMW-K23 must be installed.</span>

<span class="sd">        Args:</span>
<span class="sd">            val: the time value in seconds (tested with 0.0001)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="s1">&#39;SMW-K22&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span> <span class="ow">or</span> <span class="ow">not</span> <span class="s1">&#39;SMW-K23&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Invalid options installed (SMW-K22 and SMW-K23 needed)&#39;</span><span class="p">)</span>
        <span class="c1"># get the required submodules</span>
        <span class="n">pgen</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">submodules</span><span class="p">[</span><span class="s1">&#39;pulsegen1&#39;</span><span class="p">]</span>
        <span class="n">pmod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">submodules</span><span class="p">[</span><span class="s1">&#39;pulsemod1&#39;</span><span class="p">]</span>
        <span class="c1"># configure the submodules</span>
        <span class="n">pgen</span><span class="o">.</span><span class="n">polarity</span><span class="p">(</span><span class="s1">&#39;NORM&#39;</span><span class="p">)</span>
        <span class="n">pmod</span><span class="o">.</span><span class="n">delay</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">pmod</span><span class="o">.</span><span class="n">mode</span><span class="p">(</span><span class="s1">&#39;SING&#39;</span><span class="p">)</span>
        <span class="n">pmod</span><span class="o">.</span><span class="n">trigger_mode</span><span class="p">(</span><span class="s1">&#39;AUTO&#39;</span><span class="p">)</span>
        <span class="c1"># calculate the period to the third of the requested width</span>
        <span class="k">if</span> <span class="n">val</span> <span class="o">&lt;</span> <span class="mf">0.1</span><span class="p">:</span>
            <span class="c1"># if the requested width is too short, make it longer</span>
            <span class="n">pmod</span><span class="o">.</span><span class="n">period</span><span class="p">(</span><span class="n">val</span> <span class="o">+</span> <span class="mf">0.3</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">pmod</span><span class="o">.</span><span class="n">period</span><span class="p">(</span><span class="n">val</span> <span class="o">*</span> <span class="mf">3.0</span><span class="p">)</span>
        <span class="n">pmod</span><span class="o">.</span><span class="n">width</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
        <span class="c1"># active the pulse</span>
        <span class="n">pgen</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="s1">&#39;ON&#39;</span><span class="p">)</span>
        <span class="c1"># wait some time longer than the pulse but shorter than the period</span>
        <span class="k">if</span> <span class="n">val</span> <span class="o">&lt;</span> <span class="mf">0.1</span><span class="p">:</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">val</span> <span class="o">+</span> <span class="mf">0.1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">val</span> <span class="o">*</span> <span class="mf">1.4</span><span class="p">)</span>
        <span class="c1"># deactivate the output to prevent the second pulse</span>
        <span class="n">pgen</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="s1">&#39;OFF&#39;</span><span class="p">)</span></div>




<div class="viewcode-block" id="RohdeSchwarz_SMW200A.getall">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.RohdeSchwarz.html#qcodes_contrib_drivers.drivers.RohdeSchwarz.SMW200A.RohdeSchwarz_SMW200A.getall">[docs]</a>
    <span class="k">def</span> <span class="nf">getall</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">submod</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read all parameters and retun them to the caller. This will scan all</span>
<span class="sd">        submodules with all parameters, so in this function no changes are</span>
<span class="sd">        necessary for new modules or parameters.</span>

<span class="sd">        Args:</span>
<span class="sd">            submod: (optional) returns only the parameters for this submodule.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict with all parameters, the key is the modulename and the parametername</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">retval</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">submod</span> <span class="o">==</span> <span class="s2">&quot;*&quot;</span><span class="p">:</span>
            <span class="c1"># ID and options only if all modules are returned</span>
            <span class="n">retval</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;ID&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">idn</span><span class="p">})</span>
            <span class="n">retval</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;Options&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">})</span>

        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">submodules</span><span class="p">:</span>
            <span class="n">mod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">submodules</span><span class="p">[</span><span class="n">m</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">ChannelList</span><span class="p">)</span> <span class="ow">and</span> <span class="n">submod</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="n">m</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">mod</span><span class="o">.</span><span class="n">parameters</span><span class="p">:</span>
                    <span class="n">par</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="n">p</span><span class="p">]</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">par</span><span class="o">.</span><span class="n">unit</span><span class="o">.</span><span class="n">isEmpty</span><span class="p">():</span>
                            <span class="n">val</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">par</span><span class="p">())</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">val</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">par</span><span class="p">())</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">par</span><span class="o">.</span><span class="n">unit</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="s2">&quot;** not readable **&quot;</span>
                    <span class="n">retval</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">m</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">p</span><span class="p">:</span> <span class="n">val</span><span class="p">})</span>

        <span class="k">return</span> <span class="n">retval</span></div>
</div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, QCoDeS Users.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>