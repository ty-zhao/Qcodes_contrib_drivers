<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A &mdash; qcodes_contrib_drivers 0.14.0.dev508+main.g5677223 documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../_static/documentation_options.js?v=f47d49fe"></script>
        <script src="../../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            qcodes_contrib_drivers
          </a>
              <div class="version">
                0.14.0.dev508+main.g5677223
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../examples/index.html">Examples of how to use drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../api/generated/qcodes_contrib_drivers.drivers.html">qcodes_contrib_drivers.drivers package</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">qcodes_contrib_drivers</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Optional</span>
<span class="kn">from</span> <span class="nn">qcodes</span> <span class="kn">import</span> <span class="n">VisaInstrument</span><span class="p">,</span> <span class="n">InstrumentChannel</span>
<span class="kn">from</span> <span class="nn">qcodes.utils.validators</span> <span class="kn">import</span> <span class="n">Enum</span><span class="p">,</span> <span class="n">Ints</span>
<span class="kn">from</span> <span class="nn">qcodes.utils.helpers</span> <span class="kn">import</span> <span class="n">create_on_off_val_mapping</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<div class="viewcode-block" id="M8190AChannel">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190AChannel">[docs]</a>
<span class="k">class</span> <span class="nc">M8190AChannel</span><span class="p">(</span><span class="n">InstrumentChannel</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">VisaInstrument</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">channel</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_channel</span> <span class="o">=</span> <span class="n">channel</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sample_clock_source&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the selected clock source for a channel.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:FREQ:RAST:SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:FREQ:RAST:SOUR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2"> &quot;</span><span class="o">+</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">Enum</span><span class="p">(</span><span class="s2">&quot;INT&quot;</span><span class="p">,</span> <span class="s2">&quot;EXT&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;output_mode&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or get the waveform output mode.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:TRAC</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:DWID?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:TRAC</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:DWID &quot;</span><span class="o">+</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">Enum</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">_waveform_mode_list</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;output_path&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the output path.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:OUTP</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:ROUT?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:OUTP</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:ROUT &quot;</span><span class="o">+</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">Enum</span><span class="p">(</span><span class="s2">&quot;DAC&quot;</span><span class="p">,</span> <span class="s2">&quot;DC&quot;</span><span class="p">,</span> <span class="s2">&quot;AC&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;output_format&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the DAC format mode.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_format</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_set_format</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">Enum</span><span class="p">(</span><span class="s2">&quot;RZ&quot;</span><span class="p">,</span> <span class="s2">&quot;DNRZ&quot;</span><span class="p">,</span> <span class="s2">&quot;NRZ&quot;</span><span class="p">,</span> <span class="s2">&quot;DOUB&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;output_amplitude&quot;</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;V&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the output amplitude.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_amplitude</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_set_amplitude</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;output_offset&quot;</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;V&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the output offset.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_offset</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_set_offset</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;differential_offset&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Specifies an offset adjustment to compensate for small offset differences between normal and complement output.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:OUTP</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:DIOF?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:OUTP</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:DIOF &quot;</span><span class="o">+</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;fine_delay&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the fine delay settings. The unit is in picoseconds.&quot;</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;ps&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:ARM:DEL</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_set_fine_delay</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="mf">1e12</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;corse_delay&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the corse delay settings. The unit is in picoseconds.&quot;</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;ps&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:ARM:CDEL</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_set_corse_delay</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="mf">1e12</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;reduced_noise_floor&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the state of the “Reduced Noise Floor” feature.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:ARM:RNO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:ARM:RNO</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2"> &quot;</span><span class="o">+</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="n">create_on_off_val_mapping</span><span class="p">(</span><span class="n">on_val</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">off_val</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;normal_output&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Switch (normal) output on or off.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:OUTP</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:NORM?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:OUTP</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:NORM &quot;</span><span class="o">+</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="n">create_on_off_val_mapping</span><span class="p">(</span><span class="n">on_val</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">off_val</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;complement_output&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Switch complement output on or off.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:OUTP</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:COMP?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:OUTP</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:COMP &quot;</span><span class="o">+</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="n">create_on_off_val_mapping</span><span class="p">(</span><span class="n">on_val</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">off_val</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;termination_voltage&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the termination voltage level.&quot;</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;V&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_termination_voltage</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_set_termination_voltage</span><span class="p">)</span>

        <span class="c1"># trigger/advance/enable hardware disabled state</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;disable_trigger_hardware_input&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the hardware input disable state for the trigger function.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:TRIG:BEG</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:HWD?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:TRIG:BEG</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:HWD &quot;</span><span class="o">+</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="n">create_on_off_val_mapping</span><span class="p">(</span><span class="n">on_val</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">off_val</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;disable_advancement_hardware_input&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the hardware input disable state for the advancement function.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:TRIG:ADV</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:HWD?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:TRIG:ADV</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:HWD &quot;</span><span class="o">+</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="n">create_on_off_val_mapping</span><span class="p">(</span><span class="n">on_val</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">off_val</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;disable_enable_hardware_input&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the hardware input disable state for the enable function.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:TRIG:ENAB</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:HWD?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:TRIG:ENAB</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:HWD &quot;</span><span class="o">+</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="n">create_on_off_val_mapping</span><span class="p">(</span><span class="n">on_val</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">off_val</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">))</span>

        <span class="c1"># marker settings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sync_marker_amplitude&quot;</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;V&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the output amplitude for sync marker.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_sync_marker_amplitude</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_set_sync_marker_amplitude</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sync_marker_offset&quot;</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;V&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the output offset for sync marker.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_sync_marker_offset</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_set_sync_marker_offset</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sample_marker_amplitude&quot;</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;V&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the output amplitude for sample marker.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_sample_marker_amplitude</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_set_sample_marker_amplitude</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sample_marker_offset&quot;</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;V&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the output offset for sample marker.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_sample_marker_offset</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_set_sample_marker_offset</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;trigger_mode&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the trigger mode of current channel.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_trigger_mode</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_set_trigger_mode</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">Enum</span><span class="p">(</span><span class="s2">&quot;Continuous&quot;</span><span class="p">,</span> <span class="s2">&quot;Gated&quot;</span><span class="p">,</span> <span class="s2">&quot;Triggered&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;gate_state&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;In gated mode send a &#39;gate open&#39; or &#39;gate close&#39; to current channel.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_gate_state</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_set_gate_state</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="n">create_on_off_val_mapping</span><span class="p">(</span><span class="n">on_val</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">off_val</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sequencing_mode&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the type of waveform that will be generated.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:FUNC</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:MODE?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:FUNC</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:MODE &quot;</span><span class="o">+</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;arbitrary&quot;</span><span class="p">:</span> <span class="s2">&quot;ARB&quot;</span><span class="p">,</span>
                                        <span class="s2">&quot;sequence&quot;</span><span class="p">:</span> <span class="s2">&quot;STS&quot;</span><span class="p">,</span>
                                        <span class="s2">&quot;scenario&quot;</span><span class="p">:</span> <span class="s2">&quot;STSC&quot;</span><span class="p">})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;arm_mode&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the arming mode.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:INIT:CONT</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:ENAB?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:INIT:CONT</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:ENAB &quot;</span><span class="o">+</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">Enum</span><span class="p">(</span><span class="s2">&quot;ARM&quot;</span><span class="p">,</span> <span class="s2">&quot;SELF&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;dynamic_control&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Enable or disable dynamic mode.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:STAB</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:DYN?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:STAB</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:DYN &quot;</span><span class="o">+</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="n">create_on_off_val_mapping</span><span class="p">(</span><span class="n">on_val</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">off_val</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">))</span>

        <span class="c1"># selected segment properties</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;select_segment&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Selects the segment, which is output by the instrument in arbitrary function mode.</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">+</span>
                                     <span class="s2">&quot;In dynamic segment selection mode it selects the segment that is played &quot;</span><span class="o">+</span>
                                     <span class="s2">&quot;before the first segment is dynamically selected.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_selected_segment</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_select_segment</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">Ints</span><span class="p">(</span><span class="n">min_value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">_segment_limit</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;segment_advance_mode&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the advancement mode for the selected segment.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:TRAC</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:ADV?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_set_segment_advance_mode</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Auto&quot;</span><span class="p">:</span> <span class="s2">&quot;AUTO&quot;</span><span class="p">,</span>
                                        <span class="s2">&quot;Conditional&quot;</span><span class="p">:</span> <span class="s2">&quot;COND&quot;</span><span class="p">,</span>
                                        <span class="s2">&quot;Repeat&quot;</span><span class="p">:</span> <span class="s2">&quot;REP&quot;</span><span class="p">,</span>
                                        <span class="s2">&quot;Single&quot;</span><span class="p">:</span> <span class="s2">&quot;SING&quot;</span><span class="p">})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;segment_loop_count&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the loop count for the selected segment.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:TRAC</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:COUN?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_set_segment_loop_count</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;segment_marker&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the marker state for the selected segment.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;:TRAC</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:MARK?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_set_segment_marker</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="n">create_on_off_val_mapping</span><span class="p">(</span><span class="n">on_val</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">off_val</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;select_sequence&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Selects the sequence, which is output by the instrument in sequence function mode.</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">+</span>
                                     <span class="s2">&quot;In dynamic segment selection mode it selects the sequence that is played &quot;</span><span class="o">+</span>
                                     <span class="s2">&quot;before the first sequence is dynamically selected.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_selected_sequence</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_select_sequence</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">Ints</span><span class="p">(</span><span class="n">min_value</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>

<div class="viewcode-block" id="M8190AChannel.check_error">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190AChannel.check_error">[docs]</a>
    <span class="k">def</span> <span class="nf">check_error</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">rtn</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">status</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">error</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">status</span><span class="p">[</span><span class="s2">&quot;error code&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">status</span><span class="p">[</span><span class="s2">&quot;error message&quot;</span><span class="p">])</span>
            <span class="k">return</span> <span class="n">rtn</span>
        <span class="k">return</span> <span class="n">check</span></div>


<div class="viewcode-block" id="M8190AChannel.abort">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190AChannel.abort">[docs]</a>
    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">abort</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stops signal generation on channel. If channels are coupled, both channels are stopped.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:ABOR</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="M8190AChannel.force_enable">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190AChannel.force_enable">[docs]</a>
    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">force_enable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Send the enable event to current channel.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:TRIG:ENAB</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="M8190AChannel.force_event">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190AChannel.force_event">[docs]</a>
    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">force_event</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Send the enable event to current channel.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:TRIG:ADV</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="M8190AChannel.force_trigger">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190AChannel.force_trigger">[docs]</a>
    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">force_trigger</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;In triggered mode send the start/begin event to current channel.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_mode</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;Triggered&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The channel is not in Triggered mode.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:TRIG:BEG</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="M8190AChannel.run">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190AChannel.run">[docs]</a>
    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start signal generation on current channel. If channels are coupled, both channels are started.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:INIT:IMM</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="M8190AChannel.import_csv">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190AChannel.import_csv">[docs]</a>
    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">import_csv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">segment_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Import .CSV waveform file.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        file_path : str</span>
<span class="sd">            full path to the wavform data file</span>
<span class="sd">        segment_id : int</span>
<span class="sd">            the number of the segment, into which the data will be written</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">segment_id</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">_segment_limit</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Segment_ID is out of range!&quot;</span><span class="p">)</span>

        <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="n">cmd_string</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;:TRAC</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s1">:IQIM </span><span class="si">{</span><span class="n">segment_id</span><span class="si">}</span><span class="s1">, &quot;</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="si">}</span><span class="s1">&quot;, CSV, IONLY, ON, ALEN&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd_string</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="M8190AChannel.create_segment">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190AChannel.create_segment">[docs]</a>
    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">create_segment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">length</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">init_value</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a waveform memory segment.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        segment_id : int</span>
<span class="sd">            id of the segment, 1~512k for option SEQ, 1 if not installed</span>
<span class="sd">        length : int</span>
<span class="sd">            length of the segment in samples for direct modes</span>
<span class="sd">        init_value : int, optional</span>
<span class="sd">            optional initialization value, by default 0</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        ValueError</span>
<span class="sd">            If segment ID is not allowed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">segment_id</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">segment_id</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">_segment_limit</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Segment ID is out of range!&quot;</span><span class="p">)</span>

        <span class="n">output_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_mode</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">output_mode</span> <span class="o">==</span> <span class="s2">&quot;WPR&quot;</span><span class="p">:</span>
            <span class="n">vector_size</span> <span class="o">=</span> <span class="mi">48</span>
            <span class="n">min_seg_size</span> <span class="o">=</span> <span class="mi">240</span>
        <span class="k">elif</span> <span class="n">output_mode</span> <span class="o">==</span> <span class="s2">&quot;WSP&quot;</span><span class="p">:</span>
            <span class="n">vector_size</span> <span class="o">=</span> <span class="mi">64</span>
            <span class="n">min_seg_size</span> <span class="o">=</span> <span class="mi">320</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">vector_size</span> <span class="o">=</span> <span class="mi">24</span>
            <span class="n">min_seg_size</span> <span class="o">=</span> <span class="mi">120</span>

        <span class="n">length</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">length</span><span class="o">/</span><span class="n">vector_size</span><span class="p">)</span><span class="o">*</span><span class="n">vector_size</span><span class="p">),</span> <span class="n">min_seg_size</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:TRAC</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:DEF </span><span class="si">{</span><span class="n">segment_id</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">length</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">init_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="M8190AChannel.create_new_segment">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190AChannel.create_new_segment">[docs]</a>
    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">create_new_segment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">init_value</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new waveform memory segment and return the segment ID.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        length : int</span>
<span class="sd">            length of the segment in samples for direct modes</span>
<span class="sd">        init_value : int, optional</span>
<span class="sd">            optional initialization value, by default 0</span>

<span class="sd">        Return</span>
<span class="sd">        ------</span>
<span class="sd">        int</span>
<span class="sd">            ID of the newly created segment</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">segment_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:TRAC</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:DEF:NEW? </span><span class="si">{</span><span class="n">length</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">init_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">segment_id</span><span class="p">)</span></div>


<div class="viewcode-block" id="M8190AChannel.delete_segment">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190AChannel.delete_segment">[docs]</a>
    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">delete_segment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete a segment.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        segment_id : int</span>
<span class="sd">            ID of the segment to be deleted</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:TRAC</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:DEL </span><span class="si">{</span><span class="n">segment_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="M8190AChannel.delete_all_segments">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190AChannel.delete_all_segments">[docs]</a>
    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">delete_all_segments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete all segments</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:TRAC</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:DEL:ALL&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="M8190AChannel.write_list_to_segment">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190AChannel.write_list_to_segment">[docs]</a>
    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">write_list_to_segment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">sample_markers</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">sync_markers</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Write data from a list to a waveform memory segment.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        data : list</span>
<span class="sd">            list of data to write, ranging [-1, 1]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Data list has value out of range [-1, 1]!&quot;</span><span class="p">)</span>

        <span class="n">output_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_mode</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">output_mode</span> <span class="o">==</span> <span class="s2">&quot;WPR&quot;</span><span class="p">:</span>
            <span class="n">resolution</span> <span class="o">=</span> <span class="mi">14</span>
            <span class="n">vector_size</span> <span class="o">=</span> <span class="mi">48</span>
            <span class="n">min_seg_size</span> <span class="o">=</span> <span class="mi">240</span>
        <span class="k">elif</span> <span class="n">output_mode</span> <span class="o">==</span> <span class="s2">&quot;WSP&quot;</span><span class="p">:</span>
            <span class="n">resolution</span> <span class="o">=</span> <span class="mi">12</span>
            <span class="n">vector_size</span> <span class="o">=</span> <span class="mi">64</span>
            <span class="n">min_seg_size</span> <span class="o">=</span> <span class="mi">320</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">resolution</span> <span class="o">=</span> <span class="mi">15</span>
            <span class="n">vector_size</span> <span class="o">=</span> <span class="mi">24</span>
            <span class="n">min_seg_size</span> <span class="o">=</span> <span class="mi">120</span>

        <span class="c1"># back pad data list with zeros such that len(data) is integer multiple</span>
        <span class="c1"># of vector_size and not less than min_seg_size</span>
        <span class="k">if</span> <span class="n">output_mode</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;WPR&quot;</span><span class="p">,</span> <span class="s2">&quot;WSP&quot;</span><span class="p">]:</span>
            <span class="n">length</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">/</span><span class="n">vector_size</span><span class="p">)</span><span class="o">*</span><span class="n">vector_size</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">length</span> <span class="o">&lt;</span> <span class="n">min_seg_size</span><span class="p">:</span>
                <span class="n">length</span> <span class="o">=</span> <span class="n">min_seg_size</span>
            <span class="n">data_padded</span> <span class="o">=</span> <span class="n">data</span> <span class="o">+</span> <span class="p">(</span><span class="n">length</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">))</span><span class="o">*</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">synm_padded</span> <span class="o">=</span> <span class="n">sync_markers</span> <span class="o">+</span> <span class="p">(</span><span class="n">length</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">))</span><span class="o">*</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">smpm_padded</span> <span class="o">=</span> <span class="n">sample_markers</span> <span class="o">+</span> <span class="p">(</span><span class="n">length</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">))</span><span class="o">*</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">length</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="n">vector_size</span><span class="p">)</span><span class="o">*</span><span class="n">vector_size</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">length</span> <span class="o">&lt;</span> <span class="n">min_seg_size</span><span class="p">:</span>
                <span class="n">length</span> <span class="o">=</span> <span class="n">min_seg_size</span>
            <span class="n">data_padded</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="p">(</span><span class="n">length</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">i</span><span class="p">))</span><span class="o">*</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">data</span><span class="p">]</span>
            <span class="n">synm_padded</span> <span class="o">=</span> <span class="n">sync_markers</span> <span class="o">+</span> <span class="p">(</span><span class="n">length</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span><span class="o">*</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">smpm_padded</span> <span class="o">=</span> <span class="n">sample_markers</span> <span class="o">+</span> <span class="p">(</span><span class="n">length</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span><span class="o">*</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="c1"># translate data to 16-bit unsigned integer</span>
        <span class="n">min_val</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span><span class="o">**</span><span class="p">(</span><span class="n">resolution</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">max_val</span> <span class="o">=</span> <span class="mi">2</span><span class="o">**</span><span class="p">(</span><span class="n">resolution</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">output_mode</span> <span class="o">==</span> <span class="s2">&quot;WPR&quot;</span><span class="p">:</span>
            <span class="n">data_bitstring</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scale2int</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">min_val</span><span class="p">,</span><span class="w"> </span><span class="n">max_val</span><span class="p">)</span><span class="o">-</span><span class="n">min_val</span><span class="si">:</span><span class="s2">b</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="n">resolution</span><span class="p">)</span><span class="o">+</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">+</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">z</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">data_padded</span><span class="p">,</span> <span class="n">synm_padded</span><span class="p">,</span> <span class="n">smpm_padded</span><span class="p">)]</span>
        <span class="k">elif</span> <span class="n">output_mode</span> <span class="o">==</span> <span class="s2">&quot;WSP&quot;</span><span class="p">:</span>
            <span class="n">data_bitstring</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scale2int</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">min_val</span><span class="p">,</span><span class="w"> </span><span class="n">max_val</span><span class="p">)</span><span class="o">-</span><span class="n">min_val</span><span class="si">:</span><span class="s2">b</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="n">resolution</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;00&quot;</span><span class="o">+</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">+</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">z</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">data_padded</span><span class="p">,</span> <span class="n">synm_padded</span><span class="p">,</span> <span class="n">smpm_padded</span><span class="p">)]</span>

        <span class="n">data_translated</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="o">**</span><span class="mi">15</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">data_bitstring</span><span class="p">]</span>

        <span class="n">numeric_value</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">data_translated</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">data_translated</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">numeric_value</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;,</span><span class="si">{</span><span class="n">val</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:TRAC</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:DATA </span><span class="si">{</span><span class="n">segment_id</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">offset</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">numeric_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">None</span></div>

    
<div class="viewcode-block" id="M8190AChannel.write_list_to_binary">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190AChannel.write_list_to_binary">[docs]</a>
    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">write_list_to_binary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">sample_markers</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">sync_markers</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Write data from a list to a binary file.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        data : list</span>
<span class="sd">            list of data to write, ranging [-1, 1]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Data list has value out of range [-1, 1]!&quot;</span><span class="p">)</span>

        <span class="n">output_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_mode</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">output_mode</span> <span class="o">==</span> <span class="s2">&quot;WPR&quot;</span><span class="p">:</span>
            <span class="n">resolution</span> <span class="o">=</span> <span class="mi">14</span>
            <span class="n">vector_size</span> <span class="o">=</span> <span class="mi">48</span>
            <span class="n">min_seg_size</span> <span class="o">=</span> <span class="mi">240</span>
        <span class="k">elif</span> <span class="n">output_mode</span> <span class="o">==</span> <span class="s2">&quot;WSP&quot;</span><span class="p">:</span>
            <span class="n">resolution</span> <span class="o">=</span> <span class="mi">12</span>
            <span class="n">vector_size</span> <span class="o">=</span> <span class="mi">64</span>
            <span class="n">min_seg_size</span> <span class="o">=</span> <span class="mi">320</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">resolution</span> <span class="o">=</span> <span class="mi">15</span>
            <span class="n">vector_size</span> <span class="o">=</span> <span class="mi">24</span>
            <span class="n">min_seg_size</span> <span class="o">=</span> <span class="mi">120</span>

        <span class="c1"># back pad data list with zeros such that len(data) is integer multiple</span>
        <span class="c1"># of vector_size and not less than min_seg_size</span>
        <span class="k">if</span> <span class="n">output_mode</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;WPR&quot;</span><span class="p">,</span> <span class="s2">&quot;WSP&quot;</span><span class="p">]:</span>
            <span class="n">length</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">/</span><span class="n">vector_size</span><span class="p">)</span><span class="o">*</span><span class="n">vector_size</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">length</span> <span class="o">&lt;</span> <span class="n">min_seg_size</span><span class="p">:</span>
                <span class="n">length</span> <span class="o">=</span> <span class="n">min_seg_size</span>
            <span class="n">data_padded</span> <span class="o">=</span> <span class="n">data</span> <span class="o">+</span> <span class="p">(</span><span class="n">length</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">))</span><span class="o">*</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">synm_padded</span> <span class="o">=</span> <span class="n">sync_markers</span> <span class="o">+</span> <span class="p">(</span><span class="n">length</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">))</span><span class="o">*</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">smpm_padded</span> <span class="o">=</span> <span class="n">sample_markers</span> <span class="o">+</span> <span class="p">(</span><span class="n">length</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">))</span><span class="o">*</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">length</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="n">vector_size</span><span class="p">)</span><span class="o">*</span><span class="n">vector_size</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">length</span> <span class="o">&lt;</span> <span class="n">min_seg_size</span><span class="p">:</span>
                <span class="n">length</span> <span class="o">=</span> <span class="n">min_seg_size</span>
            <span class="n">data_padded</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="p">(</span><span class="n">length</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">i</span><span class="p">))</span><span class="o">*</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">data</span><span class="p">]</span>
            <span class="n">synm_padded</span> <span class="o">=</span> <span class="n">sync_markers</span> <span class="o">+</span> <span class="p">(</span><span class="n">length</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span><span class="o">*</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">smpm_padded</span> <span class="o">=</span> <span class="n">sample_markers</span> <span class="o">+</span> <span class="p">(</span><span class="n">length</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span><span class="o">*</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="c1"># translate data to 16-bit unsigned integer</span>
        <span class="n">min_val</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span><span class="o">**</span><span class="p">(</span><span class="n">resolution</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">max_val</span> <span class="o">=</span> <span class="mi">2</span><span class="o">**</span><span class="p">(</span><span class="n">resolution</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">output_mode</span> <span class="o">==</span> <span class="s2">&quot;WPR&quot;</span><span class="p">:</span>
            <span class="n">data_bitstring</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scale2int</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">min_val</span><span class="p">,</span><span class="w"> </span><span class="n">max_val</span><span class="p">)</span><span class="o">-</span><span class="n">min_val</span><span class="si">:</span><span class="s2">b</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="n">resolution</span><span class="p">)</span><span class="o">+</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">+</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">z</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">data_padded</span><span class="p">,</span> <span class="n">synm_padded</span><span class="p">,</span> <span class="n">smpm_padded</span><span class="p">)]</span>
        <span class="k">elif</span> <span class="n">output_mode</span> <span class="o">==</span> <span class="s2">&quot;WSP&quot;</span><span class="p">:</span>
            <span class="n">data_bitstring</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scale2int</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">min_val</span><span class="p">,</span><span class="w"> </span><span class="n">max_val</span><span class="p">)</span><span class="o">-</span><span class="n">min_val</span><span class="si">:</span><span class="s2">b</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="n">resolution</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;00&quot;</span><span class="o">+</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">+</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">z</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">data_padded</span><span class="p">,</span> <span class="n">synm_padded</span><span class="p">,</span> <span class="n">smpm_padded</span><span class="p">)]</span>

        <span class="n">data_translated</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="o">**</span><span class="mi">15</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">data_bitstring</span><span class="p">]</span>

        <span class="n">byte_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;little&#39;</span><span class="p">,</span> <span class="n">signed</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data_translated</span><span class="p">]</span>
        <span class="n">data</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">byte_list</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">binary_file</span><span class="p">:</span>
        
            <span class="c1"># Write bytes to file</span>
            <span class="n">binary_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">None</span></div>

    
<div class="viewcode-block" id="M8190AChannel.load_binary_file">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190AChannel.load_binary_file">[docs]</a>
    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">load_binary_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">segment_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load a .bin file.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;:TRAC</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s1">:IQIM </span><span class="si">{</span><span class="n">segment_id</span><span class="si">}</span><span class="s1">, &quot;</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">file</span><span class="p">)</span><span class="si">}</span><span class="s1">&quot;, BIN, IONLY, ON, ALEN&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="M8190AChannel.segment_list">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190AChannel.segment_list">[docs]</a>
    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">segment_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a list of segment-ids that are defined and the length of each segment</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pandas.DataFrame</span>
<span class="sd">            a pandas DataFrame of segment-ids and the length of each segment</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">l</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:TRAC</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:CAT?&quot;</span><span class="p">)</span>

        <span class="n">segments</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;segment_idx&quot;</span><span class="p">:</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">l</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">::</span><span class="mi">2</span><span class="p">]],</span>
                    <span class="s2">&quot;segment_length&quot;</span><span class="p">:</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">l</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">]]}</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">segments</span><span class="p">)</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">df</span></div>


<div class="viewcode-block" id="M8190AChannel.create_new_sequence">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190AChannel.create_new_sequence">[docs]</a>
    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">create_new_sequence</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">sequence_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:SEQ</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:DEF:NEW? </span><span class="si">{</span><span class="n">length</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">sequence_id</span><span class="p">)</span></div>


<div class="viewcode-block" id="M8190AChannel.sequence_list">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190AChannel.sequence_list">[docs]</a>
    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">sequence_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a list of sequence-ids that are defined and the length of each sequence</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pandas.DataFrame</span>
<span class="sd">            a pandas DataFrame of sequence-ids and the length of each sequence</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">l</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:SEQ</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:CAT?&quot;</span><span class="p">)</span>

        <span class="n">sequences</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;sequence_idx&quot;</span><span class="p">:</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">l</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">::</span><span class="mi">2</span><span class="p">]],</span>
                     <span class="s2">&quot;sequence_length&quot;</span><span class="p">:</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">l</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">]]}</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">sequences</span><span class="p">)</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">df</span></div>


<div class="viewcode-block" id="M8190AChannel.sequence_table">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190AChannel.sequence_table">[docs]</a>
    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">sequence_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sequence_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">sequence_length</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a tabel of sequence properties</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pandas.DataFrame</span>
<span class="sd">            a pandas DataFrame of sequence properties</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:STAB</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:DATA? </span><span class="si">{</span><span class="n">sequence_id</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="mi">6</span><span class="o">*</span><span class="n">sequence_length</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">property_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_stable_query</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">column_names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Entry Type&quot;</span><span class="p">,</span> <span class="s2">&quot;Segment Number&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Segment Loop Count&quot;</span><span class="p">,</span> <span class="s2">&quot;Segment Start Offset&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Segment End Offset&quot;</span><span class="p">,</span> <span class="s2">&quot;Segment Advancement&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Marker Enabled&quot;</span><span class="p">,</span> <span class="s2">&quot;New Sequence&quot;</span><span class="p">,</span> <span class="s2">&quot;End Sequence&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Sequence Loop Count&quot;</span><span class="p">,</span> <span class="s2">&quot;Sequence Advancement&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Idle Delay&quot;</span><span class="p">,</span> <span class="s2">&quot;Idle Sample&quot;</span><span class="p">]</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="n">sequence_id</span><span class="p">,</span> <span class="n">sequence_id</span><span class="o">+</span><span class="n">sequence_length</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="n">column_names</span><span class="p">)</span>

        <span class="n">advancement_mode_dict</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s2">&quot;Auto&quot;</span><span class="p">,</span>
                                 <span class="mi">1</span><span class="p">:</span> <span class="s2">&quot;Conditional&quot;</span><span class="p">,</span>
                                 <span class="mi">2</span><span class="p">:</span> <span class="s2">&quot;Repeat&quot;</span><span class="p">,</span>
                                 <span class="mi">3</span><span class="p">:</span> <span class="s2">&quot;Single&quot;</span><span class="p">}</span>

        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">seq</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">property_list</span><span class="p">):</span>
            <span class="n">idx</span> <span class="o">+=</span> <span class="n">sequence_id</span>
            <span class="k">if</span> <span class="n">seq</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Entry Type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Data&quot;</span>
                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Segment Number&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Segment Loop Count&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Segment Start Offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Segment End Offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Segment Advancement&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">advancement_mode_dict</span><span class="p">[</span><span class="n">seq</span><span class="p">[</span><span class="mi">6</span><span class="p">]]</span>
                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Marker Enabled&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">seq</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;New Sequence&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">seq</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;End Sequence&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">seq</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">seq</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
                    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Sequence Loop Count&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span>
                    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Sequence Advancement&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">advancement_mode_dict</span><span class="p">[</span><span class="n">seq</span><span class="p">[</span><span class="mi">5</span><span class="p">]]</span>
            <span class="k">elif</span> <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Entry Type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Config&quot;</span>
                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Segment Number&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Segment Start Offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Segment End Offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Segment Advancement&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">advancement_mode_dict</span><span class="p">[</span><span class="n">seq</span><span class="p">[</span><span class="mi">6</span><span class="p">]]</span>
                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Marker Enabled&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">seq</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;New Sequence&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">seq</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;End Sequence&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">seq</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">seq</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
                    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Sequence Loop Count&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span>
                    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Sequence Advancement&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">advancement_mode_dict</span><span class="p">[</span><span class="n">seq</span><span class="p">[</span><span class="mi">5</span><span class="p">]]</span>
            <span class="k">elif</span> <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mi">192</span><span class="p">:</span>
                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Entry Type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Empty&quot;</span>
                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Idle Delay&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Entry Type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Idle&quot;</span>
                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Idle Sample&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Idle Delay&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;New Sequence&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">seq</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;End Sequence&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">seq</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">seq</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
                    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Sequence Loop Count&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span>
                    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Sequence Advancement&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">advancement_mode_dict</span><span class="p">[</span><span class="n">seq</span><span class="p">[</span><span class="mi">5</span><span class="p">]]</span>

        <span class="k">return</span> <span class="n">df</span></div>


<div class="viewcode-block" id="M8190AChannel.initialize_sequence_table">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190AChannel.initialize_sequence_table">[docs]</a>
    <span class="k">def</span> <span class="nf">initialize_sequence_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sequence_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">sequence_length</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">column_names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Entry Type&quot;</span><span class="p">,</span> <span class="s2">&quot;Segment Number&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Segment Loop Count&quot;</span><span class="p">,</span> <span class="s2">&quot;Segment Start Offset&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Segment End Offset&quot;</span><span class="p">,</span> <span class="s2">&quot;Segment Advancement&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Marker Enabled&quot;</span><span class="p">,</span> <span class="s2">&quot;New Sequence&quot;</span><span class="p">,</span> <span class="s2">&quot;End Sequence&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Sequence Loop Count&quot;</span><span class="p">,</span> <span class="s2">&quot;Sequence Advancement&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Idle Delay&quot;</span><span class="p">,</span> <span class="s2">&quot;Idle Sample&quot;</span><span class="p">]</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="n">sequence_id</span><span class="p">,</span> <span class="n">sequence_id</span><span class="o">+</span><span class="n">sequence_length</span><span class="p">),</span>
                          <span class="n">columns</span><span class="o">=</span><span class="n">column_names</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span></div>


<div class="viewcode-block" id="M8190AChannel.write_df_to_seq_table">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190AChannel.write_df_to_seq_table">[docs]</a>
    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">write_df_to_seq_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">sequence_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">sequence_length</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">advancement_mode_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Auto&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s2">&quot;Conditional&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                                <span class="s2">&quot;Repeat&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                                <span class="s2">&quot;Single&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>

        <span class="n">property_list</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">sequence_length</span><span class="p">):</span>
            <span class="n">idx</span> <span class="o">+=</span> <span class="n">sequence_id</span>
            <span class="n">seq</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">16</span>
            <span class="k">if</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Entry Type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Data&quot;</span><span class="p">:</span>
                <span class="n">seq</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Segment Number&quot;</span><span class="p">]</span>
                <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Segment Loop Count&quot;</span><span class="p">]</span>
                <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Segment Start Offset&quot;</span><span class="p">]</span>
                <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Segment End Offset&quot;</span><span class="p">]</span>
                <span class="n">seq</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">advancement_mode_dict</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Segment Advancement&quot;</span><span class="p">]]</span>
                <span class="n">seq</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Marker Enabled&quot;</span><span class="p">])</span>
                <span class="n">seq</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;New Sequence&quot;</span><span class="p">])</span>
                <span class="n">seq</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;End Sequence&quot;</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">seq</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
                    <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Sequence Loop Count&quot;</span><span class="p">]</span>
                    <span class="n">seq</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">advancement_mode_dict</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Sequence Advancement&quot;</span><span class="p">]]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>        
            <span class="k">elif</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Entry Type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Config&quot;</span><span class="p">:</span>
                <span class="n">seq</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Segment Number&quot;</span><span class="p">]</span>
                <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Segment Start Offset&quot;</span><span class="p">]</span>
                <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Segment End Offset&quot;</span><span class="p">]</span>
                <span class="n">seq</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">advancement_mode_dict</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Segment Advancement&quot;</span><span class="p">]]</span>
                <span class="n">seq</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Marker Enabled&quot;</span><span class="p">])</span>
                <span class="n">seq</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;New Sequence&quot;</span><span class="p">])</span>
                <span class="n">seq</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;End Sequence&quot;</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">seq</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
                    <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Sequence Loop Count&quot;</span><span class="p">]</span>
                    <span class="n">seq</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">advancement_mode_dict</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Sequence Advancement&quot;</span><span class="p">]]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">elif</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Entry Type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Empty&quot;</span><span class="p">:</span>
                <span class="n">seq</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">192</span>
                <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Idle Delay&quot;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">seq</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Idle Sample&quot;</span><span class="p">]</span>
                <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Idle Delay&quot;</span><span class="p">]</span>
                <span class="n">seq</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;New Sequence&quot;</span><span class="p">])</span>
                <span class="n">seq</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;End Sequence&quot;</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">seq</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
                    <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Sequence Loop Count&quot;</span><span class="p">]</span>
                    <span class="n">seq</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">advancement_mode_dict</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;Sequence Advancement&quot;</span><span class="p">]]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
                    
            <span class="n">property_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">seq</span><span class="p">)</span>

        <span class="n">l</span> <span class="o">=</span> <span class="p">[[</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">seq</span><span class="p">]</span> <span class="k">for</span> <span class="n">seq</span> <span class="ow">in</span> <span class="n">property_list</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">seq</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">l</span><span class="p">):</span>
            <span class="n">seq</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;0&quot;</span><span class="o">*</span><span class="mi">12</span><span class="p">)</span>
            <span class="n">seq</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;000&quot;</span><span class="p">)</span>
            <span class="n">seq</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">seq</span><span class="p">[</span><span class="mi">6</span><span class="p">])</span><span class="si">:</span><span class="s2">b</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
            <span class="n">seq</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">seq</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span><span class="si">:</span><span class="s2">b</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;-1&quot;</span><span class="p">:</span>
                <span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;#hFFFFFFFF&quot;</span>

            <span class="n">l</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">seq</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">13</span><span class="p">]),</span> <span class="mi">2</span><span class="p">))]</span> <span class="o">+</span> <span class="n">seq</span><span class="p">[</span><span class="mi">13</span><span class="p">:]</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">l</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:STAB</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:DATA </span><span class="si">{</span><span class="n">sequence_id</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">s</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="M8190AChannel.reset_sequence_table">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190AChannel.reset_sequence_table">[docs]</a>
    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">reset_sequence_table</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:STAB</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:RES&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="M8190AChannel.delete_sequence">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190AChannel.delete_sequence">[docs]</a>
    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">delete_sequence</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sequence_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete a sequence.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        sequence_id : int</span>
<span class="sd">            ID of the sequence to be deleted</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:SEQ</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:DEL </span><span class="si">{</span><span class="n">sequence_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="M8190AChannel.delete_all_sequences">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190AChannel.delete_all_sequences">[docs]</a>
    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">delete_all_sequences</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete all sequences</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:SEQ</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:DEL:ALL&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span></div>


    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_set_gate_state</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_mode</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;Gated&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The channel is not in Gated mode.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:TRIG:BEG</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:GATE </span><span class="si">{</span><span class="n">state</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_get_gate_state</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_mode</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;Gated&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The channel is not in Gated mode.&quot;</span><span class="p">)</span>

        <span class="n">string</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:TRIG:BEG</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:GATE?&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">string</span>

    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_get_format</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">string</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="p">()</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:FORM?&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">string</span>

    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_set_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="p">()</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:FORM </span><span class="si">{</span><span class="nb">format</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_get_amplitude</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">string</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="p">()</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:VOLT:AMPL?&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>

    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_set_amplitude</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amplitude</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;DAC&quot;</span><span class="p">:</span>
            <span class="n">min_lim</span> <span class="o">=</span> <span class="mf">0.1</span>
            <span class="n">max_lim</span> <span class="o">=</span> <span class="mf">0.7</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;DC&quot;</span><span class="p">:</span>
            <span class="n">min_lim</span> <span class="o">=</span> <span class="mf">0.15</span>
            <span class="n">max_lim</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">min_lim</span> <span class="o">=</span> <span class="mf">0.1</span>
            <span class="n">max_lim</span> <span class="o">=</span> <span class="mi">2</span>

        <span class="n">clipped_amplitude</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">amplitude</span><span class="p">,</span> <span class="n">min_lim</span><span class="p">,</span> <span class="n">max_lim</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">amplitude</span> <span class="o">&gt;</span> <span class="n">max_lim</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Input value is greater than allowed range. Clipped to upper bound </span><span class="si">{</span><span class="n">max_lim</span><span class="si">}</span><span class="s2">V.&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">amplitude</span> <span class="o">&lt;</span> <span class="n">min_lim</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Input value is smaller than allowed range. Clipped to lower bound </span><span class="si">{</span><span class="n">min_lim</span><span class="si">}</span><span class="s2">V.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="p">()</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:VOLT:AMPL </span><span class="si">{</span><span class="n">clipped_amplitude</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_get_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;DC&quot;</span><span class="p">,</span> <span class="s2">&quot;DAC&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Only DAC or DC output path has offset setting.&quot;</span><span class="p">)</span>

        <span class="n">string</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="p">()</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:VOLT:OFFS?&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>

    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_set_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;DC&quot;</span><span class="p">,</span> <span class="s2">&quot;DAC&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Only DAC or DC output path has offset setting.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;DAC&quot;</span><span class="p">:</span>
            <span class="n">min_lim</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.02</span>
            <span class="n">max_lim</span> <span class="o">=</span> <span class="mf">0.02</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">min_lim</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="mf">0.925</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">termination_voltage</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">max_lim</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mf">3.225</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">termination_voltage</span><span class="p">()</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">clipped_offset</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">min_lim</span><span class="p">,</span> <span class="n">max_lim</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">offset</span> <span class="o">&gt;</span> <span class="n">max_lim</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Input value is greater than allowed range. Clipped to upper bound </span><span class="si">{</span><span class="n">max_lim</span><span class="si">}</span><span class="s2">V.&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">offset</span> <span class="o">&lt;</span> <span class="n">min_lim</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Input value is smaller than allowed range. Clipped to lower bound </span><span class="si">{</span><span class="n">min_lim</span><span class="si">}</span><span class="s2">V.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="p">()</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:VOLT:OFFS </span><span class="si">{</span><span class="n">clipped_offset</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_get_termination_voltage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;DC&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Only DC output path has termination voltage setting.&quot;</span><span class="p">)</span>

        <span class="n">string</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="p">()</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:VOLT:TERM?&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>

    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_set_termination_voltage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">termination_offset</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;DC&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Only DC output path has termination voltage setting.&quot;</span><span class="p">)</span>

        <span class="n">min_lim</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_offset</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">max_lim</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mf">3.5</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_offset</span><span class="p">()</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">clipped_termination_offset</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">termination_offset</span><span class="p">,</span> <span class="n">min_lim</span><span class="p">,</span> <span class="n">max_lim</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">termination_offset</span> <span class="o">&gt;</span> <span class="n">max_lim</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Input value is greater than allowed range. Clipped to upper bound </span><span class="si">{</span><span class="n">max_lim</span><span class="si">}</span><span class="s2">V.&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">termination_offset</span> <span class="o">&lt;</span> <span class="n">min_lim</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Input value is smaller than allowed range. Clipped to lower bound </span><span class="si">{</span><span class="n">min_lim</span><span class="si">}</span><span class="s2">V.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="p">()</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:VOLT:TERM </span><span class="si">{</span><span class="n">clipped_termination_offset</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_set_fine_delay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fine_delay</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">reduced_noise_floor</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Not able to set fine or corse delay while Reduced Noise Floor is enabled.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sample_clock_source</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;INT&quot;</span><span class="p">:</span>
            <span class="n">sampling_rate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">internal_sample_frequency</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sampling_rate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">external_sample_frequency</span><span class="p">()</span>

        <span class="n">min_lim</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">sampling_rate</span> <span class="o">&gt;=</span> <span class="mf">6.25e9</span><span class="p">:</span>
            <span class="n">max_lim</span> <span class="o">=</span> <span class="mi">30</span>
        <span class="k">elif</span> <span class="n">sampling_rate</span> <span class="o">&gt;=</span> <span class="mf">2.5e9</span><span class="p">:</span>
            <span class="n">max_lim</span> <span class="o">=</span> <span class="mi">60</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">max_lim</span> <span class="o">=</span> <span class="mi">150</span>

        <span class="n">clipped_fine_delay</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">fine_delay</span><span class="p">,</span> <span class="n">min_lim</span><span class="p">,</span> <span class="n">max_lim</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:ARM:DEL</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">clipped_fine_delay</span><span class="o">/</span><span class="mf">1e12</span><span class="si">:</span><span class="s2">.2e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fine_delay</span> <span class="o">&gt;</span> <span class="n">max_lim</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Input value is greater than allowed range. Clipped to upper bound </span><span class="si">{</span><span class="nb">max</span><span class="si">}</span><span class="s2">ps.&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">fine_delay</span> <span class="o">&lt;</span> <span class="n">min_lim</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Input value is smaller than allowed range. Clipped to lower bound </span><span class="si">{</span><span class="nb">min</span><span class="si">}</span><span class="s2">ps.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_set_corse_delay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">corse_delay</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">reduced_noise_floor</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Not able to set fine or corse delay while Reduced Noise Floor is enabled.&quot;</span><span class="p">)</span>

        <span class="n">clipped_corse_delay</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">corse_delay</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:ARM:CDEL</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">clipped_corse_delay</span><span class="o">/</span><span class="mf">1e12</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">corse_delay</span> <span class="o">&gt;</span> <span class="mi">10000</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Input value is greater than allowed range. Clipped to upper bound </span><span class="si">{</span><span class="nb">max</span><span class="si">}</span><span class="s2">ps.&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">corse_delay</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Input value is smaller than allowed range. Clipped to lower bound </span><span class="si">{</span><span class="nb">min</span><span class="si">}</span><span class="s2">ps.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_get_sync_marker_amplitude</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">string</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:MARK</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:SYNC:VOLT:AMPL?&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>

    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_set_sync_marker_amplitude</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amplitude</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>

        <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sync_marker_offset</span><span class="p">()</span>
        <span class="n">min_lim</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">max_lim</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">2</span><span class="o">*</span><span class="n">offset</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="p">(</span><span class="mf">1.75</span><span class="o">-</span><span class="n">offset</span><span class="p">))</span>

        <span class="n">clipped_amplitude</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">amplitude</span><span class="p">,</span> <span class="n">min_lim</span><span class="p">,</span> <span class="n">max_lim</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">amplitude</span> <span class="o">&gt;</span> <span class="n">max_lim</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Input value is greater than allowed range. Clipped to upper bound </span><span class="si">{</span><span class="n">max_lim</span><span class="si">}</span><span class="s2">V.&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">amplitude</span> <span class="o">&lt;</span> <span class="n">min_lim</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Input value is smaller than allowed range. Clipped to lower bound </span><span class="si">{</span><span class="n">min_lim</span><span class="si">}</span><span class="s2">V.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:MARK</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:SYNC:VOLT:AMPL </span><span class="si">{</span><span class="n">clipped_amplitude</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_get_sync_marker_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">string</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:MARK</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:SYNC:VOLT:OFFS?&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>

    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_set_sync_marker_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>

        <span class="n">amplitude</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sync_marker_amplitude</span><span class="p">()</span>
        <span class="n">min_lim</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="mi">200</span><span class="o">*</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span><span class="o">+</span><span class="n">amplitude</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span><span class="o">/</span><span class="mi">200</span>
        <span class="n">max_lim</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="p">(</span><span class="mf">1.75</span><span class="o">-</span><span class="n">amplitude</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span><span class="o">/</span><span class="mi">100</span>

        <span class="n">clipped_offset</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">min_lim</span><span class="p">,</span> <span class="n">max_lim</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">offset</span> <span class="o">&gt;</span> <span class="n">max_lim</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Input value is greater than allowed range. Clipped to upper bound </span><span class="si">{</span><span class="n">max_lim</span><span class="si">}</span><span class="s2">V.&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">offset</span> <span class="o">&lt;</span> <span class="n">min_lim</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Input value is smaller than allowed range. Clipped to lower bound </span><span class="si">{</span><span class="n">min_lim</span><span class="si">}</span><span class="s2">V.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:MARK</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:SYNC:VOLT:OFFS </span><span class="si">{</span><span class="n">clipped_offset</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_get_sample_marker_amplitude</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">string</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:MARK</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:SAMP:VOLT:AMPL?&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>

    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_set_sample_marker_amplitude</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amplitude</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>

        <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sample_marker_offset</span><span class="p">()</span>
        <span class="n">min_lim</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">max_lim</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">2</span><span class="o">*</span><span class="n">offset</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="p">(</span><span class="mf">1.75</span><span class="o">-</span><span class="n">offset</span><span class="p">))</span>

        <span class="n">clipped_amplitude</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">amplitude</span><span class="p">,</span> <span class="n">min_lim</span><span class="p">,</span> <span class="n">max_lim</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">amplitude</span> <span class="o">&gt;</span> <span class="n">max_lim</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Input value is greater than allowed range. Clipped to upper bound </span><span class="si">{</span><span class="n">max_lim</span><span class="si">}</span><span class="s2">V.&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">amplitude</span> <span class="o">&lt;</span> <span class="n">min_lim</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Input value is smaller than allowed range. Clipped to lower bound </span><span class="si">{</span><span class="n">min_lim</span><span class="si">}</span><span class="s2">V.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:MARK</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:SAMP:VOLT:AMPL </span><span class="si">{</span><span class="n">clipped_amplitude</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_get_sample_marker_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">string</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:MARK</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:SAMP:VOLT:OFFS?&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>

    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_set_sample_marker_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="n">amplitude</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sample_marker_amplitude</span><span class="p">()</span>
        <span class="n">min_lim</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="mi">200</span><span class="o">*</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span><span class="o">+</span><span class="n">amplitude</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span><span class="o">/</span><span class="mi">200</span>
        <span class="n">max_lim</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="p">(</span><span class="mf">1.75</span><span class="o">-</span><span class="n">amplitude</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span><span class="o">/</span><span class="mi">100</span>

        <span class="n">clipped_offset</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">min_lim</span><span class="p">,</span> <span class="n">max_lim</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">offset</span> <span class="o">&gt;</span> <span class="n">max_lim</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Input value is greater than allowed range. Clipped to upper bound </span><span class="si">{</span><span class="n">max_lim</span><span class="si">}</span><span class="s2">V.&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">offset</span> <span class="o">&lt;</span> <span class="n">min_lim</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Input value is smaller than allowed range. Clipped to lower bound </span><span class="si">{</span><span class="n">min_lim</span><span class="si">}</span><span class="s2">V.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:MARK</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:SAMP:VOLT:OFFS </span><span class="si">{</span><span class="n">clipped_offset</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_get_trigger_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">is_continuous_mode</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:INIT:CONT</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:STAT?&quot;</span><span class="p">))</span>
        <span class="n">is_gate_mode</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:INIT:GATE</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:STAT?&quot;</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">is_continuous_mode</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Continuous&quot;</span>
        <span class="k">elif</span> <span class="n">is_gate_mode</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Gated&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Triggered&quot;</span>

    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_set_trigger_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;Continuous&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:INIT:CONT</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:STAT ON&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;Gated&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:INIT:CONT</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:STAT OFF&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:INIT:GATE</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:STAT ON&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:INIT:CONT</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:STAT OFF&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:INIT:GATE</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:STAT OFF&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_set_segment_advance_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sequencing_mode</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;arbitrary&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;This setting is only valid when the segment is played in arbitrary mode.&quot;</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:TRAC</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:ADV </span><span class="si">{</span><span class="n">mode</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_set_segment_loop_count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">count</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sequencing_mode</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;arbitrary&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;This setting is only valid when the segment is played in arbitrary mode.&quot;</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:TRAC</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:COUN </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_set_segment_marker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:TRAC</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:MARK </span><span class="si">{</span><span class="n">state</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_select_segment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sequencing_mode</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;arbitrary&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;This setting only applies when current channel is in Arbitrary sequencing mode.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:TRAC</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:SEL </span><span class="si">{</span><span class="n">segment_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_selected_segment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sequencing_mode</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;arbitrary&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;This setting only applies when current channel is in Arbitrary sequencing mode.&quot;</span><span class="p">)</span>

        <span class="n">segment_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:TRAC</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:SEL?&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">segment_id</span><span class="p">)</span>

    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_select_sequence</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sequence_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sequencing_mode</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;sequence&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;This setting only applies when current channel is in Sequence sequencing mode.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:STAB</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:SEQ:SEL </span><span class="si">{</span><span class="n">sequence_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">_selected_sequence</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sequencing_mode</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;sequence&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;This setting only applies when current channel is in Sequence sequencing mode.&quot;</span><span class="p">)</span>

        <span class="n">sequence_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;:STAB</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="si">}</span><span class="s2">:SEQ:SEL?&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">sequence_id</span><span class="p">)</span>

<div class="viewcode-block" id="M8190AChannel.scale2int">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190AChannel.scale2int">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">scale2int</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">min</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">max</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">round</span><span class="p">((</span><span class="nb">max</span><span class="o">-</span><span class="nb">min</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="o">+</span><span class="p">(</span><span class="nb">max</span><span class="o">+</span><span class="nb">min</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span></div>


<div class="viewcode-block" id="M8190AChannel.parse_control_parameter">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190AChannel.parse_control_parameter">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">parse_control_parameter</span><span class="p">(</span><span class="n">control_string</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">bit_string</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">control_string</span><span class="p">)</span><span class="si">:</span><span class="s2">b</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>

        <span class="n">pattern</span> <span class="o">=</span> <span class="s1">&#39;(\d)(\d)(\d)(\d)(\d</span><span class="si">{3}</span><span class="s1">)(\d)(\d</span><span class="si">{4}</span><span class="s1">)(\d</span><span class="si">{4}</span><span class="s1">)(\d)(\d)(\d)(\d)(\d*)&#39;</span>
        <span class="n">matched_string</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">bit_string</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">())</span>

        <span class="c1"># delete unused bits</span>
        <span class="k">del</span> <span class="n">matched_string</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
        <span class="k">del</span> <span class="n">matched_string</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">return</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">matched_string</span><span class="p">]</span></div>


<div class="viewcode-block" id="M8190AChannel.parse_stable_query">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190AChannel.parse_stable_query">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">parse_stable_query</span><span class="p">(</span><span class="n">query_return</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">list_splitted</span> <span class="o">=</span> <span class="n">query_return</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
        <span class="n">num_seq</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">list_splitted</span><span class="p">)</span><span class="o">/</span><span class="mi">6</span><span class="p">)</span>
        <span class="n">grouped_list</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_seq</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">list_splitted</span><span class="p">):</span>
            <span class="n">grouped_list</span><span class="p">[</span><span class="n">idx</span> <span class="o">//</span> <span class="mi">6</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

        <span class="c1">#parse the elements</span>
        <span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="n">M8190AChannel</span><span class="o">.</span><span class="n">parse_control_parameter</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">grouped_list</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">l</span></div>
</div>


<div class="viewcode-block" id="M8190A">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190A">[docs]</a>
<span class="k">class</span> <span class="nc">M8190A</span><span class="p">(</span><span class="n">VisaInstrument</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is the qcodes driver for Keysight/Agilent M8190A.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">terminator</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c1"># Query the instrument for installed options</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s1">&#39;*OPT?&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;001&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">:</span> <span class="c1"># Number of channels option</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_num_of_channel</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_num_of_channel</span> <span class="o">=</span> <span class="mi">2</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_waveform_mode_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="s2">&quot;14B&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">:</span> <span class="c1"># high precision option</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_waveform_mode_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;WPR&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;12G&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">:</span> <span class="c1"># high speed option</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_waveform_mode_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;WSP&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;DUC&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">:</span> <span class="c1"># interpolate option</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_waveform_mode_list</span> <span class="o">+=</span> <span class="p">[</span><span class="s2">&quot;INTX3&quot;</span><span class="p">,</span> <span class="s2">&quot;INTX12&quot;</span><span class="p">,</span> <span class="s2">&quot;INTX24&quot;</span><span class="p">,</span> <span class="s2">&quot;INTX48&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="s2">&quot;SEQ&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_segment_limit</span> <span class="o">=</span> <span class="mi">512000</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_segment_limit</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="k">for</span> <span class="n">chan</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_of_channel</span><span class="p">):</span>
            <span class="n">channel</span> <span class="o">=</span> <span class="n">M8190AChannel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Ch</span><span class="si">{</span><span class="n">chan</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="n">chan</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_submodule</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Ch</span><span class="si">{</span><span class="n">chan</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">channel</span><span class="p">)</span>

        <span class="c1"># clock settings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;reference_clock_source&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the reference clock source.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="s2">&quot;:ROSC:SOUR?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="s2">&quot;:ROSC:SOUR </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">Enum</span><span class="p">(</span><span class="s2">&quot;EXT&quot;</span><span class="p">,</span> <span class="s2">&quot;INT&quot;</span><span class="p">,</span> <span class="s2">&quot;AXI&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;reference_clock_frequency&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the expected reference clock frequency, if the external reference clock source is selected.&quot;</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;Hz&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="s2">&quot;:ROSC:FREQ?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="s2">&quot;:ROSC:FREQ </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;internal_sample_frequency&quot;</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;Hz&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the internal sample frequency.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="s2">&quot;:FREQ:RAST?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="s2">&quot;:FREQ:RAST </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;external_sample_frequency&quot;</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;Hz&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the external sample frequency.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="s2">&quot;:FREQ:RAST:EXT?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="s2">&quot;:FREQ:RAST:EXT </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sample_clock_output&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Select which clock source is routed to the SCLK output&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="s2">&quot;:OUTP:SCLK:SOUR?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="s2">&quot;:OUTP:SCLK:SOUR </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">Enum</span><span class="p">(</span><span class="s2">&quot;EXT&quot;</span><span class="p">,</span> <span class="s2">&quot;INT&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;channel_coupling&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Switch coupling on/off.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="s2">&quot;:INST:COUP:STAT?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="s2">&quot;:INST:COUP:STAT </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="n">create_on_off_val_mapping</span><span class="p">(</span><span class="n">on_val</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">off_val</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">))</span>

        <span class="c1"># trigger settings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;advancement_event&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the source for the advancement event.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="s2">&quot;:TRIG:SOUR:ADV?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="s2">&quot;:TRIG:SOUR:ADV </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">Enum</span><span class="p">(</span><span class="s2">&quot;TRIG&quot;</span><span class="p">,</span> <span class="s2">&quot;EVEN&quot;</span><span class="p">,</span> <span class="s2">&quot;INT&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;enable_event&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the source for the enable event.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="s2">&quot;:TRIG:SOUR:ENAB?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="s2">&quot;:TRIG:SOUR:ENAB </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">Enum</span><span class="p">(</span><span class="s2">&quot;TRIG&quot;</span><span class="p">,</span> <span class="s2">&quot;EVEN&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;trigger_source&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the source for the trigger function.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="s2">&quot;:ARM:TRIG:SOUR?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="s2">&quot;:ARM:TRIG:SOUR </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">Enum</span><span class="p">(</span><span class="s2">&quot;EXT&quot;</span><span class="p">,</span> <span class="s2">&quot;INT&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;trigger_input_threshold&quot;</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;V&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the trigger input threshold level.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="s2">&quot;:ARM:TRIG:LEV?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="s2">&quot;:ARM:TRIG:LEV </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;trigger_input_polarity&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the trigger input slope.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="s2">&quot;:ARM:TRIG:SLOP?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="s2">&quot;:ARM:TRIG:SLOP </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">Enum</span><span class="p">(</span><span class="s2">&quot;POS&quot;</span><span class="p">,</span> <span class="s2">&quot;NEG&quot;</span><span class="p">,</span> <span class="s2">&quot;EITH&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;trigger_input_impedance&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the trigger input impedance.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="s2">&quot;:ARM:TRIG:IMP?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="s2">&quot;:ARM:TRIG:IMP </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">Enum</span><span class="p">(</span><span class="s2">&quot;LOW&quot;</span><span class="p">,</span> <span class="s2">&quot;HIGH&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;internal_trigger_frequency&quot;</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;Hz&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the frequency of the internal trigger generator.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="s2">&quot;:ARM:TRIG:FREQ?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="s2">&quot;:ARM:TRIG:FREQ </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;event_input_threshold&quot;</span><span class="p">,</span>
                           <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;V&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the event input threshold level.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="s2">&quot;:ARM:EVEN:LEV?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="s2">&quot;:ARM:EVEN:LEV </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                           <span class="n">get_parser</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;event_input_polarity&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the event input slope.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="s2">&quot;:ARM:EVEN:SLOP?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="s2">&quot;:ARM:EVEN:SLOP </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">Enum</span><span class="p">(</span><span class="s2">&quot;POS&quot;</span><span class="p">,</span> <span class="s2">&quot;NEG&quot;</span><span class="p">,</span> <span class="s2">&quot;EITH&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;event_input_impedance&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the event input impedance.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="s2">&quot;:ARM:EVEN:IMP?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="s2">&quot;:ARM:EVEN:IMP </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                           <span class="n">vals</span><span class="o">=</span><span class="n">Enum</span><span class="p">(</span><span class="s2">&quot;LOW&quot;</span><span class="p">,</span> <span class="s2">&quot;HIGH&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;valid_bits&quot;</span><span class="p">,</span>
                           <span class="n">docstring</span><span class="o">=</span><span class="s2">&quot;Set or query the number of valid bits of the dynamic control input.&quot;</span><span class="p">,</span>
                           <span class="n">get_cmd</span><span class="o">=</span><span class="s2">&quot;:ARM:DYNP:WIDT?&quot;</span><span class="p">,</span>
                           <span class="n">set_cmd</span><span class="o">=</span><span class="s2">&quot;:ARM:DYNP:WIDT </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                           <span class="n">val_mapping</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;AllBits&quot;</span><span class="p">:</span> <span class="s2">&quot;ALLB&quot;</span><span class="p">,</span>
                                        <span class="s2">&quot;LowerBits&quot;</span><span class="p">:</span> <span class="s2">&quot;LOW&quot;</span><span class="p">})</span>

<div class="viewcode-block" id="M8190A.check_error">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190A.check_error">[docs]</a>
    <span class="k">def</span> <span class="nf">check_error</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">status</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">error</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">status</span><span class="p">[</span><span class="s2">&quot;error code&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">status</span><span class="p">[</span><span class="s2">&quot;error message&quot;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">check</span></div>


<div class="viewcode-block" id="M8190A.reset">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190A.reset">[docs]</a>
    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reset instrument to its factory default state.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;*RST&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="M8190A.error">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190A.error">[docs]</a>
    <span class="k">def</span> <span class="nf">error</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">string</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="s2">&quot;:SYST:ERR?&quot;</span><span class="p">)</span>
        <span class="n">matched_string</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;([-\d]*),&quot;(.*)&quot;&#39;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">()</span>

        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error code&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">matched_string</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="s2">&quot;error message&quot;</span><span class="p">:</span> <span class="n">matched_string</span><span class="p">[</span><span class="mi">1</span><span class="p">]}</span></div>


<div class="viewcode-block" id="M8190A.get_idn">
<a class="viewcode-back" href="../../../../api/generated/qcodes_contrib_drivers.drivers.Keysight.html#qcodes_contrib_drivers.drivers.Keysight.Keysight_M8190A.M8190A.get_idn">[docs]</a>
    <span class="nd">@check_error</span>
    <span class="k">def</span> <span class="nf">get_idn</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
        <span class="n">IDN_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ask_raw</span><span class="p">(</span><span class="s1">&#39;*IDN?&#39;</span><span class="p">)</span>
        <span class="n">vendor</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">serial</span><span class="p">,</span> <span class="n">firmware</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">strip</span><span class="p">,</span> <span class="n">IDN_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">))</span>
        <span class="n">IDN</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;vendor&#39;</span><span class="p">:</span> <span class="n">vendor</span><span class="p">,</span> <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="n">model</span><span class="p">,</span>
            <span class="s1">&#39;serial&#39;</span><span class="p">:</span> <span class="n">serial</span><span class="p">,</span> <span class="s1">&#39;firmware&#39;</span><span class="p">:</span> <span class="n">firmware</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">IDN</span></div>
</div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, QCoDeS Users.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>